[1mdiff --git a/app/match/page.tsx b/app/match/page.tsx[m
[1mindex 1a72ce2..b809ccd 100644[m
[1m--- a/app/match/page.tsx[m
[1m+++ b/app/match/page.tsx[m
[36m@@ -2,7 +2,7 @@[m
 [m
 import { useEffect, useState, useMemo, useCallback } from "react";[m
 import { db, auth } from "@/lib/firebaseConfig";[m
[31m-import { type SkillBand, SKILL_OPTIONS, skillFromUTR } from "@/lib/skill";[m
[32m+[m[32mimport { type SkillBand, SKILL_OPTIONS, skillFromUTR } from "@/lib/skills";[m
 import {[m
   collection, getDocs, doc, getDoc, addDoc,[m
   serverTimestamp, query, where, updateDoc,[m
[1mdiff --git a/app/players/[id]/page.tsx b/app/players/[id]/page.tsx[m
[1mindex fdbb322..95214f1 100644[m
[1m--- a/app/players/[id]/page.tsx[m
[1m+++ b/app/players/[id]/page.tsx[m
[36m@@ -10,7 +10,6 @@[m [mimport { onAuthStateChanged } from "firebase/auth";[m
 import { auth } from "@/lib/firebase";[m
 import { CalendarDays, CheckCircle2, Trophy } from "lucide-react";[m
 [m
[31m-[m
 type Player = {[m
   name: string;[m
   postcode: string;[m
[36m@@ -18,8 +17,13 @@[m [mtype Player = {[m
   availability: string[];[m
   bio: string;[m
   photoURL?: string;[m
[32m+[m[32m  // New canonical + legacy support[m
[32m+[m[32m  skillRating?: number | null;[m
[32m+[m[32m  utr?: number | null;[m
 };[m
 [m
[32m+[m[32mconst RATING_LABEL = "TennisMate Rating (TMR)";[m
[32m+[m
 function PublicProfilePage() {[m
   const { id } = useParams();[m
   const [player, setPlayer] = useState<Player | null>(null);[m
[36m@@ -31,61 +35,70 @@[m [mfunction PublicProfilePage() {[m
   });[m
   const [showFullBio, setShowFullBio] = useState(false);[m
 [m
[31m-useEffect(() => {[m
[31m-  const fetchPlayerAndStats = async () => {[m
[31m-    if (!id) return;[m
[31m-[m
[31m-    try {[m
[31m-      const playerRef = doc(db, "players", id as string);[m
[31m-      const playerSnap = await getDoc(playerRef);[m
[31m-[m
[31m-      if (playerSnap.exists()) {[m
[31m-        const d = playerSnap.data();[m
[31m-        setPlayer({[m
[31m-          name: d.name,[m
[31m-          postcode: d.postcode,[m
[31m-          skillLevel: d.skillLevel,[m
[31m-          availability: d.availability,[m
[31m-          bio: d.bio,[m
[31m-          photoURL: d.photoURL,[m
[32m+[m[32m  useEffect(() => {[m
[32m+[m[32m    const fetchPlayerAndStats = async () => {[m
[32m+[m[32m      if (!id) return;[m
[32m+[m
[32m+[m[32m      try {[m
[32m+[m[32m        const playerRef = doc(db, "players", id as string);[m
[32m+[m[32m        const playerSnap = await getDoc(playerRef);[m
[32m+[m
[32m+[m[32m        if (playerSnap.exists()) {[m
[32m+[m[32m          const d = playerSnap.data() as any;[m
[32m+[m
[32m+[m[32m          // Prefer new field, fall back to legacy "utr"[m
[32m+[m[32m          const ratingNumber: number | null =[m
[32m+[m[32m            typeof d.skillRating === "number" ? d.skillRating :[m
[32m+[m[32m            typeof d.utr === "number" ? d.utr :[m
[32m+[m[32m            null;[m
[32m+[m
[32m+[m[32m          setPlayer({[m
[32m+[m[32m            name: d.name,[m
[32m+[m[32m            postcode: d.postcode,[m
[32m+[m[32m            skillLevel: d.skillLevel,[m
[32m+[m[32m            availability: d.availability || [],[m
[32m+[m[32m            bio: d.bio || "",[m
[32m+[m[32m            photoURL: d.photoURL,[m
[32m+[m[32m            skillRating: ratingNumber,[m
[32m+[m[32m            utr: d.utr ?? null, // keep for backward display if needed[m
[32m+[m[32m          });[m
[32m+[m[32m        } else {[m
[32m+[m[32m          console.warn("Player not found in Firestore.");[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        const matchQuery = query([m
[32m+[m[32m          collection(db, "match_history"),[m
[32m+[m[32m          where("players", "array-contains", id)[m
[32m+[m[32m        );[m
[32m+[m[32m        const snapshot = await getDocs(matchQuery);[m
[32m+[m
[32m+[m[32m        let total = 0, complete = 0, wins = 0;[m
[32m+[m[32m        snapshot.forEach((doc) => {[m
[32m+[m[32m          const match = doc.data() as any;[m
[32m+[m[32m          total++;[m
[32m+[m[32m          if (match.completed) complete++;[m
[32m+[m[32m          if (match.winnerId === id) wins++;[m
         });[m
[31m-      } else {[m
[31m-        console.warn("Player not found in Firestore.");[m
[32m+[m
[32m+[m[32m        setMatchStats({ matches: total, completed: complete, wins });[m
[32m+[m[32m      } catch (error) {[m
[32m+[m[32m        console.error("Error loading player profile:", error);[m
[32m+[m[32m      } finally {[m
[32m+[m[32m        setLoading(false);[m
       }[m
[32m+[m[32m    };[m
 [m
[31m-      const matchQuery = query([m
[31m-        collection(db, "match_history"),[m
[31m-        where("players", "array-contains", id)[m
[31m-      );[m
[31m-      const snapshot = await getDocs(matchQuery);[m
[31m-[m
[31m-      let total = 0, complete = 0, wins = 0;[m
[31m-      snapshot.forEach((doc) => {[m
[31m-        const match = doc.data();[m
[31m-        total++;[m
[31m-        if (match.completed) complete++;[m
[31m-        if (match.winnerId === id) wins++;[m
[31m-      });[m
[31m-[m
[31m-      setMatchStats({ matches: total, completed: complete, wins });[m
[31m-    } catch (error) {[m
[31m-      console.error("Error loading player profile:", error);[m
[31m-    } finally {[m
[31m-      setLoading(false);[m
[31m-    }[m
[31m-  };[m
[31m-[m
[31m-  const unsubscribe = onAuthStateChanged(auth, (user) => {[m
[31m-    if (user) {[m
[31m-      fetchPlayerAndStats();[m
[31m-    } else {[m
[31m-      console.warn("User not signed in");[m
[31m-      setLoading(false);[m
[31m-    }[m
[31m-  });[m
[32m+[m[32m    const unsubscribe = onAuthStateChanged(auth, (user) => {[m
[32m+[m[32m      if (user) {[m
[32m+[m[32m        fetchPlayerAndStats();[m
[32m+[m[32m      } else {[m
[32m+[m[32m        console.warn("User not signed in");[m
[32m+[m[32m        setLoading(false);[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
 [m
[31m-  return () => unsubscribe();[m
[31m-}, [id]);[m
[32m+[m[32m    return () => unsubscribe();[m
[32m+[m[32m  }, [id]);[m
 [m
   if (loading) {[m
     return ([m
[36m@@ -105,128 +118,144 @@[m [museEffect(() => {[m
     );[m
   }[m
 [m
[32m+[m[32m  // Decide what to display for rating (prefer new field)[m
[32m+[m[32m  const displayRating =[m
[32m+[m[32m    typeof player.skillRating === "number" ? player.skillRating :[m
[32m+[m[32m    typeof player.utr === "number" ? player.utr :[m
[32m+[m[32m    null;[m
[32m+[m
   return ([m
[31m-  <div className="mx-auto max-w-3xl p-4 sm:p-6 pb-28 text-gray-800 space-y-6">[m
[31m-    {/* HERO HEADER */}[m
[31m-    <section className="relative overflow-hidden rounded-2xl border border-gray-200 bg-gradient-to-b from-white to-emerald-50 p-5 sm:p-6 shadow-sm">[m
[31m-      {/* decorative blobs */}[m
[31m-      <span className="pointer-events-none absolute -top-10 -right-10 h-28 w-28 rounded-full bg-emerald-200/40 blur-2xl" />[m
[31m-      <span className="pointer-events-none absolute -bottom-8 -left-8 h-24 w-24 rounded-full bg-emerald-100/60 blur-2xl" />[m
[31m-[m
[31m-      <div className="flex flex-col sm:flex-row sm:items-center gap-4 sm:gap-6">[m
[31m-  {/* Avatar (keep it round) */}[m
[31m-  <div className="relative h-24 w-24 shrink-0 rounded-full overflow-hidden ring-4 ring-white bg-gray-100 aspect-square">[m
[31m-    {player.photoURL ? ([m
[31m-      <Image[m
[31m-        src={player.photoURL}[m
[31m-        alt={`${player.name} avatar`}[m
[31m-        fill[m
[31m-        className="object-cover"[m
[31m-        sizes="96px"[m
[31m-      />[m
[31m-    ) : ([m
[31m-      <div className="flex h-full w-full items-center justify-center text-xl text-gray-500">[m
[31m-        {player.name.slice(0, 2).toUpperCase()}[m
[31m-      </div>[m
[31m-    )}[m
[31m-  </div>[m
[31m-[m
[31m-  {/* Name + meta */}[m
[31m-  <div className="min-w-0">[m
[31m-    <h1 className="text-2xl sm:text-3xl font-bold tracking-tight break-words">[m
[31m-      {player.name}[m
[31m-    </h1>[m
[31m-[m
[31m-    {/* Chips */}[m
[31m-    <div className="mt-2 flex flex-wrap items-center gap-2 text-sm">[m
[31m-      <span className="rounded-full border border-emerald-200 bg-emerald-50 text-emerald-700 px-2.5 py-0.5">[m
[31m-        Skill: {player.skillLevel || "—"}[m
[31m-      </span>[m
[31m-      {player.postcode ? ([m
[31m-        <span className="rounded-full border border-emerald-200 bg-emerald-50 text-emerald-700 px-2.5 py-0.5">[m
[31m-          Postcode {player.postcode}[m
[31m-        </span>[m
[31m-      ) : null}[m
[31m-    </div>[m
[32m+[m[32m    <div className="mx-auto max-w-3xl p-4 sm:p-6 pb-28 text-gray-800 space-y-6">[m
[32m+[m[32m      {/* HERO HEADER */}[m
[32m+[m[32m      <section className="relative overflow-hidden rounded-2xl border border-gray-200 bg-gradient-to-b from-white to-emerald-50 p-5 sm:p-6 shadow-sm">[m
[32m+[m[32m        {/* decorative blobs */}[m
[32m+[m[32m        <span className="pointer-events-none absolute -top-10 -right-10 h-28 w-28 rounded-full bg-emerald-200/40 blur-2xl" />[m
[32m+[m[32m        <span className="pointer-events-none absolute -bottom-8 -left-8 h-24 w-24 rounded-full bg-emerald-100/60 blur-2xl" />[m
 [m
[31m-    {/* Bio */}[m
[31m-    {player.bio && ([m
[31m-      <div className="mt-3">[m
[31m-        <p[m
[31m-          className={`text-[15px] leading-relaxed text-gray-700 ${[m
[31m-            showFullBio ? "" : "line-clamp-3"[m
[31m-          }`}[m
[31m-        >[m
[31m-          {player.bio}[m
[31m-        </p>[m
[31m-        {player.bio.length > 160 && ([m
[31m-          <button[m
[31m-            type="button"[m
[31m-            onClick={() => setShowFullBio((v) => !v)}[m
[31m-            className="mt-1 text-sm text-gray-600 underline"[m
[31m-          >[m
[31m-            {showFullBio ? "Show less" : "Read more"}[m
[31m-          </button>[m
[31m-        )}[m
[31m-      </div>[m
[31m-    )}[m
[31m-  </div>[m
[31m-</div>[m
[31m-[m
[31m-    </section>[m
[31m-[m
[31m-    {/* AVAILABILITY */}[m
[31m-    <section className="rounded-2xl border border-gray-200 bg-white p-5 shadow-sm">[m
[31m-      <h2 className="text-lg font-semibold">Availability</h2>[m
[31m-      {player.availability?.length ? ([m
[31m-        <div className="mt-2 flex flex-wrap gap-2">[m
[31m-          {player.availability.map((slot, i) => ([m
[31m-            <span[m
[31m-              key={`${slot}-${i}`}[m
[31m-              className="rounded-full border border-emerald-200 bg-emerald-50 text-emerald-800 px-3 py-1 text-sm"[m
[31m-            >[m
[31m-              {slot}[m
[31m-            </span>[m
[31m-          ))}[m
[32m+[m[32m        <div className="flex flex-col sm:flex-row sm:items-center gap-4 sm:gap-6">[m
[32m+[m[32m          {/* Avatar (keep it round) */}[m
[32m+[m[32m          <div className="relative h-24 w-24 shrink-0 rounded-full overflow-hidden ring-4 ring-white bg-gray-100 aspect-square">[m
[32m+[m[32m            {player.photoURL ? ([m
[32m+[m[32m              <Image[m
[32m+[m[32m                src={player.photoURL}[m
[32m+[m[32m                alt={`${player.name} avatar`}[m
[32m+[m[32m                fill[m
[32m+[m[32m                className="object-cover"[m
[32m+[m[32m                sizes="96px"[m
[32m+[m[32m              />[m
[32m+[m[32m            ) : ([m
[32m+[m[32m              <div className="flex h-full w-full items-center justify-center text-xl text-gray-500">[m
[32m+[m[32m                {player.name?.slice(0, 2)?.toUpperCase() || "TM"}[m
[32m+[m[32m              </div>[m
[32m+[m[32m            )}[m
[32m+[m[32m          </div>[m
[32m+[m
[32m+[m[32m          {/* Name + meta */}[m
[32m+[m[32m          <div className="min-w-0">[m
[32m+[m[32m            <h1 className="text-2xl sm:text-3xl font-bold tracking-tight break-words">[m
[32m+[m[32m              {player.name}[m
[32m+[m[32m            </h1>[m
[32m+[m
[32m+[m[32m            {/* Chips */}[m
[32m+[m[32m            <div className="mt-2 flex flex-wrap items-center gap-2 text-sm">[m
[32m+[m[32m              <span className="rounded-full border border-emerald-200 bg-emerald-50 text-emerald-700 px-2.5 py-0.5">[m
[32m+[m[32m                Skill: {player.skillLevel || "—"}[m
[32m+[m[32m              </span>[m
[32m+[m
[32m+[m[32m              {typeof displayRating === "number" && ([m
[32m+[m[32m                <span className="rounded-full border border-emerald-200 bg-emerald-50 text-emerald-700 px-2.5 py-0.5">[m
[32m+[m[32m                  TMR {displayRating.toFixed(2)}[m
[32m+[m[32m                </span>[m
[32m+[m[32m              )}[m
[32m+[m
[32m+[m[32m              {player.postcode ? ([m
[32m+[m[32m                <span className="rounded-full border border-emerald-200 bg-emerald-50 text-emerald-700 px-2.5 py-0.5">[m
[32m+[m[32m                  Postcode {player.postcode}[m
[32m+[m[32m                </span>[m
[32m+[m[32m              ) : null}[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            {/* Optional note under chips */}[m
[32m+[m[32m            {typeof displayRating === "number" && ([m
[32m+[m[32m              <p className="mt-1 text-xs text-gray-500">[m
[32m+[m[32m                TMR is a simple numeric skill indicator (comparable to UTR®; TennisMate isn’t affiliated with Universal Tennis).[m
[32m+[m[32m              </p>[m
[32m+[m[32m            )}[m
[32m+[m
[32m+[m[32m            {/* Bio */}[m
[32m+[m[32m            {player.bio && ([m
[32m+[m[32m              <div className="mt-3">[m
[32m+[m[32m                <p[m
[32m+[m[32m                  className={`text-[15px] leading-relaxed text-gray-700 ${[m
[32m+[m[32m                    showFullBio ? "" : "line-clamp-3"[m
[32m+[m[32m                  }`}[m
[32m+[m[32m                >[m
[32m+[m[32m                  {player.bio}[m
[32m+[m[32m                </p>[m
[32m+[m[32m                {player.bio.length > 160 && ([m
[32m+[m[32m                  <button[m
[32m+[m[32m                    type="button"[m
[32m+[m[32m                    onClick={() => setShowFullBio((v) => !v)}[m
[32m+[m[32m                    className="mt-1 text-sm text-gray-600 underline"[m
[32m+[m[32m                  >[m
[32m+[m[32m                    {showFullBio ? "Show less" : "Read more"}[m
[32m+[m[32m                  </button>[m
[32m+[m[32m                )}[m
[32m+[m[32m              </div>[m
[32m+[m[32m            )}[m
[32m+[m[32m          </div>[m
         </div>[m
[31m-      ) : ([m
[31m-        <p className="mt-2 text-sm text-gray-600">No availability provided.</p>[m
[31m-      )}[m
[31m-    </section>[m
[31m-[m
[31m-    {/* MATCH STATS */}[m
[31m-    <section className="grid grid-cols-1 sm:grid-cols-3 gap-3" aria-labelledby="stats-heading">[m
[31m-      <h2 id="stats-heading" className="sr-only">Match stats</h2>[m
[31m-[m
[31m-      {/* Card 1 */}[m
[31m-      <div className="rounded-2xl border border-gray-200 bg-white p-4 shadow-sm text-center">[m
[31m-        <div className="mx-auto mb-2 flex h-8 w-8 items-center justify-center rounded-full bg-emerald-100 text-emerald-700">[m
[31m-          <CalendarDays className="h-4 w-4" />[m
[32m+[m[32m      </section>[m
[32m+[m
[32m+[m[32m      {/* AVAILABILITY */}[m
[32m+[m[32m      <section className="rounded-2xl border border-gray-200 bg-white p-5 shadow-sm">[m
[32m+[m[32m        <h2 className="text-lg font-semibold">Availability</h2>[m
[32m+[m[32m        {player.availability?.length ? ([m
[32m+[m[32m          <div className="mt-2 flex flex-wrap gap-2">[m
[32m+[m[32m            {player.availability.map((slot, i) => ([m
[32m+[m[32m              <span[m
[32m+[m[32m                key={`${slot}-${i}`}[m
[32m+[m[32m                className="rounded-full border border-emerald-200 bg-emerald-50 text-emerald-800 px-3 py-1 text-sm"[m
[32m+[m[32m              >[m
[32m+[m[32m                {slot}[m
[32m+[m[32m              </span>[m
[32m+[m[32m            ))}[m
[32m+[m[32m          </div>[m
[32m+[m[32m        ) : ([m
[32m+[m[32m          <p className="mt-2 text-sm text-gray-600">No availability provided.</p>[m
[32m+[m[32m        )}[m
[32m+[m[32m      </section>[m
[32m+[m
[32m+[m[32m      {/* MATCH STATS */}[m
[32m+[m[32m      <section className="grid grid-cols-1 sm:grid-cols-3 gap-3" aria-labelledby="stats-heading">[m
[32m+[m[32m        <h2 id="stats-heading" className="sr-only">Match stats</h2>[m
[32m+[m
[32m+[m[32m        <div className="rounded-2xl border border-gray-200 bg-white p-4 shadow-sm text-center">[m
[32m+[m[32m          <div className="mx-auto mb-2 flex h-8 w-8 items-center justify-center rounded-full bg-emerald-100 text-emerald-700">[m
[32m+[m[32m            <CalendarDays className="h-4 w-4" />[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <div className="text-2xl font-bold tabular-nums">{matchStats.matches}</div>[m
[32m+[m[32m          <div className="mt-1 text-sm text-gray-700">Total Matches</div>[m
         </div>[m
[31m-        <div className="text-2xl font-bold tabular-nums">{matchStats.matches}</div>[m
[31m-        <div className="mt-1 text-sm text-gray-700">Total Matches</div>[m
[31m-      </div>[m
 [m
[31m-      {/* Card 2 */}[m
[31m-      <div className="rounded-2xl border border-gray-200 bg-white p-4 shadow-sm text-center">[m
[31m-        <div className="mx-auto mb-2 flex h-8 w-8 items-center justify-center rounded-full bg-emerald-100 text-emerald-700">[m
[31m-          <CheckCircle2 className="h-4 w-4" />[m
[32m+[m[32m        <div className="rounded-2xl border border-gray-200 bg-white p-4 shadow-sm text-center">[m
[32m+[m[32m          <div className="mx-auto mb-2 flex h-8 w-8 items-center justify-center rounded-full bg-emerald-100 text-emerald-700">[m
[32m+[m[32m            <CheckCircle2 className="h-4 w-4" />[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <div className="text-2xl font-bold tabular-nums">{matchStats.completed}</div>[m
[32m+[m[32m          <div className="mt-1 text-sm text-gray-700">Completed Matches</div>[m
         </div>[m
[31m-        <div className="text-2xl font-bold tabular-nums">{matchStats.completed}</div>[m
[31m-        <div className="mt-1 text-sm text-gray-700">Completed Matches</div>[m
[31m-      </div>[m
 [m
[31m-      {/* Card 3 */}[m
[31m-      <div className="rounded-2xl border border-gray-200 bg-white p-4 shadow-sm text-center">[m
[31m-        <div className="mx-auto mb-2 flex h-8 w-8 items-center justify-center rounded-full bg-emerald-100 text-emerald-700">[m
[31m-          <Trophy className="h-4 w-4" />[m
[32m+[m[32m        <div className="rounded-2xl border border-gray-200 bg-white p-4 shadow-sm text-center">[m
[32m+[m[32m          <div className="mx-auto mb-2 flex h-8 w-8 items-center justify-center rounded-full bg-emerald-100 text-emerald-700">[m
[32m+[m[32m            <Trophy className="h-4 w-4" />[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <div className="text-2xl font-bold tabular-nums">{matchStats.wins}</div>[m
[32m+[m[32m          <div className="mt-1 text-sm text-gray-700">Wins</div>[m
         </div>[m
[31m-        <div className="text-2xl font-bold tabular-nums">{matchStats.wins}</div>[m
[31m-        <div className="mt-1 text-sm text-gray-700">Wins</div>[m
[31m-      </div>[m
[31m-    </section>[m
[31m-  </div>[m
[31m-);[m
[32m+[m[32m      </section>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  );[m
 }[m
 [m
 export default withAuth(PublicProfilePage);[m
[1mdiff --git a/app/profile/ProfileContent.tsx b/app/profile/ProfileContent.tsx[m
[1mindex 8d80247..2a0abd8 100644[m
[1m--- a/app/profile/ProfileContent.tsx[m
[1m+++ b/app/profile/ProfileContent.tsx[m
[36m@@ -19,6 +19,43 @@[m [mimport { ref, uploadBytes, getDownloadURL, deleteObject } from "firebase/storage[m
 import Cropper from "react-easy-crop";[m
 import getCroppedImg from "../utils/cropImage";[m
 import { Edit2, Trophy, CheckCircle2, CalendarDays } from "lucide-react";[m
[32m+[m[32mimport type { SkillBand } from "@/lib/skills";[m
[32m+[m[32mimport { clampUTR, SKILL_OPTIONS, skillFromUTR } from "@/lib/skills";[m
[32m+[m[32mimport type { ChangeEvent } from "react";[m
[32m+[m[32mimport React from "react";[m
[32m+[m
[32m+[m[32mconst RATING_LABEL = "TennisMate Rating (TMR)";[m
[32m+[m[32m// ---- fallback options in case SKILL_OPTIONS is missing/mis-exported ----[m
[32m+[m[32mconst SKILL_OPTIONS_SAFE =[m
[32m+[m[32m  Array.isArray(SKILL_OPTIONS) && SKILL_OPTIONS.length > 0[m
[32m+[m[32m    ? SKILL_OPTIONS[m
[32m+[m[32m    : ([[m
[32m+[m[32m        { value: "beginner", label: "Beginner" },[m
[32m+[m[32m        { value: "intermediate", label: "Intermediate" },[m
[32m+[m[32m        { value: "advanced", label: "Advanced" },[m
[32m+[m[32m      ] as Array<{ value: SkillBand; label: string }>);[m
[32m+[m
[32m+[m
[32m+[m[32mconst coarseFromBand = (b?: SkillBand | "") =>[m
[32m+[m[32m  !b ? "" :[m
[32m+[m[32m  b.includes("beginner") ? "Beginner" :[m
[32m+[m[32m  b.includes("intermediate") ? "Intermediate" :[m
[32m+[m[32m  "Advanced";[m
[32m+[m
[32m+[m[32mconst getSkillLabel = (band: SkillBand | "" | undefined) => {[m
[32m+[m[32m  return SKILL_OPTIONS_SAFE.find(o => o.value === band)?.label ?? "—";[m
[32m+[m[32m};[m
[32m+[m
[32m+[m
[32m+[m[32mconst legacyToBand = (level?: string): SkillBand | "" => {[m
[32m+[m[32m  if (!level) return "";[m
[32m+[m[32m  const norm = level.toLowerCase();[m
[32m+[m[32m  if (norm.includes("beginner")) return "beginner";[m
[32m+[m[32m  if (norm.includes("intermediate")) return "intermediate";[m
[32m+[m[32m  if (norm.includes("advanced") || norm.includes("advance")) return "advanced";[m
[32m+[m[32m  return "";[m
[32m+[m[32m};[m
[32m+[m
 [m
 export default function ProfilePage() {[m
   const router = useRouter();[m
[36m@@ -38,53 +75,72 @@[m [mexport default function ProfilePage() {[m
   const [bioExpanded, setBioExpanded] = useState(false);[m
 [m
 [m
[31m-  const [formData, setFormData] = useState({[m
[31m-    name: "",[m
[31m-    postcode: "",[m
[31m-    skillLevel: "",[m
[31m-    availability: [] as string[],[m
[31m-    bio: "",[m
[31m-    photoURL: "",[m
[31m-    badges: [] as string[],[m
[31m-    timestamp: null as any,[m
[31m-  });[m
[32m+[m[32m const [formData, setFormData] = useState({[m
[32m+[m[32m  name: "",[m
[32m+[m[32m  postcode: "",[m
[32m+[m[32m  skillBand: "" as SkillBand | "",[m
[32m+[m[32m  rating: "" as number | "",[m
[32m+[m[32m  availability: [] as string[],[m
[32m+[m[32m  bio: "",[m
[32m+[m[32m  photoURL: "",[m
[32m+[m[32m  badges: [] as string[],[m
[32m+[m[32m  timestamp: null as any,[m
[32m+[m[32m});[m
   const [matchStats, setMatchStats] = useState({ matches: 0, completed: 0, wins: 0 });[m
 [m
   useEffect(() => {[m
[31m-    const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {[m
[31m-      if (!currentUser) return;[m
[31m-      setUser(currentUser);[m
[31m-      const playerRef = doc(db, "players", currentUser.uid);[m
[31m-      const snap = await getDoc(playerRef);[m
[31m-      const data = snap.data() || {};[m
[31m-      setFormData({[m
[31m-        name: data.name || "",[m
[31m-        postcode: data.postcode || "",[m
[31m-        skillLevel: data.skillLevel || "",[m
[31m-        availability: data.availability || [],[m
[31m-        bio: data.bio || "",[m
[31m-        photoURL: data.photoURL || "",[m
[31m-        badges: data.badges || [],[m
[31m-        timestamp: data.timestamp || null,[m
[31m-      });[m
[31m-      if (data.photoURL) setPreviewURL(data.photoURL);[m
[31m-      const q = query([m
[31m-        collection(db, "match_history"),[m
[31m-        where("players", "array-contains", currentUser.uid)[m
[31m-      );[m
[31m-      const msnap = await getDocs(q);[m
[31m-      let total = 0, complete = 0, wins = 0;[m
[31m-     msnap.forEach((d) => {[m
[31m-  const m = d.data();[m
[31m-  total++;[m
[31m-  if (m.completed) complete++;[m
[31m-  if (m.winnerId === currentUser.uid) wins++;[m
[32m+[m[32m  const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {[m
[32m+[m[32m    if (!currentUser) return;[m
[32m+[m[32m    setUser(currentUser);[m
[32m+[m
[32m+[m[32m    const playerRef = doc(db, "players", currentUser.uid);[m
[32m+[m[32m    const snap = await getDoc(playerRef);[m
[32m+[m[32m    const data = snap.data() || {};[m
[32m+[m
[32m+[m[32m    // ⬇️ Add this block[m
[32m+[m[32m  // Derive band from skillRating or fallback to UTR or legacy level[m
[32m+[m[32mconst ratingNumber =[m
[32m+[m[32m  typeof data.skillRating === "number" ? data.skillRating :[m
[32m+[m[32m  typeof data.utr === "number" ? data.utr : null;[m
[32m+[m
[32m+[m[32mconst derivedBand: SkillBand | "" =[m
[32m+[m[32m  (data.skillBand as SkillBand) ||[m
[32m+[m[32m  (typeof ratingNumber === "number" ? (skillFromUTR(ratingNumber) ?? "") : "") ||[m
[32m+[m[32m  legacyToBand(data.skillLevel) ||[m
[32m+[m[32m  "";[m
[32m+[m
[32m+[m[32msetFormData({[m
[32m+[m[32m  name: data.name || "",[m
[32m+[m[32m  postcode: data.postcode || "",[m
[32m+[m[32m  skillBand: derivedBand || "",[m
[32m+[m[32m  rating: typeof ratingNumber === "number" ? ratingNumber : "",[m
[32m+[m[32m  availability: data.availability || [],[m
[32m+[m[32m  bio: data.bio || "",[m
[32m+[m[32m  photoURL: data.photoURL || "",[m
[32m+[m[32m  badges: data.badges || [],[m
[32m+[m[32m  timestamp: data.timestamp || null,[m
 });[m
[31m-      setMatchStats({ matches: total, completed: complete, wins });[m
[31m-      setLoading(false);[m
[32m+[m
[32m+[m[32m    if (data.photoURL) setPreviewURL(data.photoURL);[m
[32m+[m
[32m+[m[32m    const q = query([m
[32m+[m[32m      collection(db, "match_history"),[m
[32m+[m[32m      where("players", "array-contains", currentUser.uid)[m
[32m+[m[32m    );[m
[32m+[m[32m    const msnap = await getDocs(q);[m
[32m+[m[32m    let total = 0, complete = 0, wins = 0;[m
[32m+[m[32m    msnap.forEach((d) => {[m
[32m+[m[32m      const m = d.data();[m
[32m+[m[32m      total++;[m
[32m+[m[32m      if (m.completed) complete++;[m
[32m+[m[32m      if (m.winnerId === currentUser.uid) wins++;[m
     });[m
[31m-    return () => unsubscribe();[m
[31m-  }, []);[m
[32m+[m[32m    setMatchStats({ matches: total, completed: complete, wins });[m
[32m+[m[32m    setLoading(false);[m
[32m+[m[32m  });[m
[32m+[m[32m  return () => unsubscribe();[m
[32m+[m[32m}, []);[m
[32m+[m
 [m
   useEffect(() => {[m
     setEditMode(searchParams.get("edit") === "true");[m
[36m@@ -95,6 +151,24 @@[m [mexport default function ProfilePage() {[m
     setFormData((prev) => ({ ...prev, [name]: value }));[m
   };[m
 [m
[32m+[m[32m// NEW: UTR field (optional)[m
[32m+[m[32mconst handleRatingChange = (raw: string) => {[m
[32m+[m[32m  if (raw.trim() === "") {[m
[32m+[m[32m    setFormData(prev => ({ ...prev, rating: "" }));[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m[32m  const n = Number(raw);[m
[32m+[m[32m  if (Number.isNaN(n)) {[m
[32m+[m[32m    setFormData(prev => ({ ...prev, rating: "" }));[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m[32m  const clamped = clampUTR(n);                 // reusing your existing util[m
[32m+[m[32m  const derived = skillFromUTR(clamped) ?? ""; // reusing your existing util[m
[32m+[m[32m  setFormData(prev => ({ ...prev, rating: clamped, skillBand: derived }));[m
[32m+[m[32m};[m
[32m+[m
[32m+[m
[32m+[m
   const handleCheckbox = (e: any) => {[m
     const { value, checked } = e.target;[m
     setFormData((prev) => ({[m
[36m@@ -105,7 +179,7 @@[m [mexport default function ProfilePage() {[m
     }));[m
   };[m
 [m
[31m-const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {[m
[32m+[m[32mconst handleImageChange = (e: ChangeEvent<HTMLInputElement>) => {[m
   const file = e.target.files?.[0];[m
   if (!file) return;[m
   const reader = new FileReader();[m
[36m@@ -157,7 +231,7 @@[m [mif (!formData.name.trim()) {[m
   setStatus("Please enter your name.");[m
   return;[m
 }[m
[31m-if (!formData.skillLevel) {[m
[32m+[m[32mif (!formData.skillBand) {[m
   setStatus("Please choose a skill level.");[m
   return;[m
 }[m
[36m@@ -176,11 +250,29 @@[m [mif (!/^\d{4}$/.test(formData.postcode.trim())) {[m
         await uploadBytes(refSt, croppedImage);[m
         photoURL = await getDownloadURL(refSt);[m
       }[m
[31m-      await setDoc([m
[31m-        doc(db, "players", user.uid),[m
[31m-        { ...formData, photoURL,  nameLower: (formData.name || "").toLowerCase(), email: user.email, timestamp: serverTimestamp(), profileComplete: true },[m
[31m-        { merge: true }[m
[31m-      );[m
[32m+[m
[32m+[m[32mawait setDoc([m
[32m+[m[32m  doc(db, "players", user.uid),[m
[32m+[m[32m  (() => {[m
[32m+[m[32m    const { rating, ...rest } = formData; // ← strip UI-only field[m
[32m+[m[32m    return {[m
[32m+[m[32m      ...rest,[m
[32m+[m[32m      // canonical fields:[m
[32m+[m[32m      skillBand: formData.skillBand || null,[m
[32m+[m[32m      skillRating: formData.rating === "" ? null : formData.rating, // new canonical[m
[32m+[m[32m      utr: formData.rating === "" ? null : formData.rating,         // TEMP mirror[m
[32m+[m[32m      skillLevel: coarseFromBand(formData.skillBand),[m
[32m+[m[32m      photoURL,[m
[32m+[m[32m      nameLower: (formData.name || "").toLowerCase(),[m
[32m+[m[32m      email: user.email,[m
[32m+[m[32m      timestamp: serverTimestamp(),[m
[32m+[m[32m      profileComplete: true,[m
[32m+[m[32m    };[m
[32m+[m[32m  })(),[m
[32m+[m[32m  { merge: true }[m
[32m+[m[32m);[m
[32m+[m
[32m+[m
       setStatus("✅ Profile saved successfully!");[m
       router.push("/profile");[m
     } catch {[m
[36m@@ -206,371 +298,436 @@[m [mif (!/^\d{4}$/.test(formData.postcode.trim())) {[m
 [m
   if (loading) return <p className="p-6">Loading...</p>;[m
 [m
[31m-return ([m
[31m-  <div className="relative mx-auto max-w-3xl p-4 sm:p-6 space-y-5 pb-28 overflow-x-hidden bg-gradient-to-b from-emerald-50/60 to-white">[m
[31m-    {!editMode ? ([m
[31m-      <>[m
[31m-        {/* HERO HEADER */}[m
[31m-        <section className="relative overflow-hidden rounded-2xl border border-gray-200 bg-gradient-to-b from-white to-emerald-50 p-5 sm:p-6 shadow-sm text-center">[m
[31m-          {/* decorative blobs */}[m
[31m-          <span className="pointer-events-none absolute -top-10 -right-10 h-28 w-28 rounded-full bg-emerald-200/40 blur-2xl" />[m
[31m-          <span className="pointer-events-none absolute -bottom-8 -left-8 h-24 w-24 rounded-full bg-emerald-100/60 blur-2xl" />[m
[31m-[m
[31m-          <img[m
[31m-            src={previewURL || "/default-avatar.png"}[m
[31m-            alt={`${formData.name || "User"} avatar`}[m
[31m-            className="h-24 w-24 rounded-full object-cover ring-4 ring-white"[m
[31m-          />[m
[31m-[m
[31m-          <h1 className="mt-3 text-2xl sm:text-3xl font-bold break-words">[m
[31m-            {formData.name || "Your Name"}[m
[31m-          </h1>[m
[31m-[m
[31m-          <div className="mt-1 flex flex-wrap items-center justify-center gap-2 text-sm text-gray-600">[m
[31m-            <span className="rounded-full border border-emerald-200 bg-emerald-50 text-emerald-700 px-2.5 py-0.5">[m
[31m-              Skill: {formData.skillLevel || "—"}[m
[31m-            </span>[m
[31m-            {formData.postcode && ([m
[32m+[m[32m  return ([m
[32m+[m[32m    <div className="relative mx-auto max-w-3xl p-4 sm:p-6 space-y-5 pb-28 overflow-x-hidden bg-gradient-to-b from-emerald-50/60 to-white">[m
[32m+[m[32m      {!editMode ? ([m
[32m+[m[32m        <>[m
[32m+[m[32m          {/* HERO HEADER */}[m
[32m+[m[32m          <section className="relative overflow-hidden rounded-2xl border border-gray-200 bg-gradient-to-b from-white to-emerald-50 p-5 sm:p-6 shadow-sm text-center">[m
[32m+[m[32m            <span className="pointer-events-none absolute -top-10 -right-10 h-28 w-28 rounded-full bg-emerald-200/40 blur-2xl" />[m
[32m+[m[32m            <span className="pointer-events-none absolute -bottom-8 -left-8 h-24 w-24 rounded-full bg-emerald-100/60 blur-2xl" />[m
[32m+[m
[32m+[m[32m            <img[m
[32m+[m[32m              src={previewURL || "/default-avatar.png"}[m
[32m+[m[32m              alt={`${formData.name || "User"} avatar`}[m
[32m+[m[32m              className="h-24 w-24 rounded-full object-cover ring-4 ring-white"[m
[32m+[m[32m            />[m
[32m+[m
[32m+[m[32m            <h1 className="mt-3 text-2xl sm:text-3xl font-bold break-words">[m
[32m+[m[32m              {formData.name || "Your Name"}[m
[32m+[m[32m            </h1>[m
[32m+[m
[32m+[m[32m            <div className="mt-1 flex flex-wrap items-center justify-center gap-2 text-sm text-gray-600">[m
               <span className="rounded-full border border-emerald-200 bg-emerald-50 text-emerald-700 px-2.5 py-0.5">[m
[31m-                Postcode {formData.postcode}[m
[32m+[m[32m                Skill: {getSkillLabel(formData.skillBand)}[m
               </span>[m
[32m+[m[32m             {typeof formData.rating === "number" && ([m
[32m+[m[32m  <span className="rounded-full border border-emerald-200 bg-emerald-50 text-emerald-700 px-2.5 py-0.5">[m
[32m+[m[32m    TMR {formData.rating.toFixed(2)}[m
[32m+[m[32m  </span>[m
[32m+[m[32m)}[m
[32m+[m[32m              {formData.postcode && ([m
[32m+[m[32m                <span className="rounded-full border border-emerald-200 bg-emerald-50 text-emerald-700 px-2.5 py-0.5">[m
[32m+[m[32m                  Postcode {formData.postcode}[m
[32m+[m[32m                </span>[m
[32m+[m[32m              )}[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            {user?.email && ([m
[32m+[m[32m              <p className="mt-1 text-sm text-gray-500">[m
[32m+[m[32m                <a href={`mailto:${user.email}`} className="hover:underline">[m
[32m+[m[32m                  {user.email}[m
[32m+[m[32m                </a>[m
[32m+[m[32m              </p>[m
             )}[m
[31m-          </div>[m
 [m
[31m-          {user?.email && ([m
[31m-            <p className="mt-1 text-sm text-gray-500">[m
[31m-              <a href={`mailto:${user.email}`} className="hover:underline">{user.email}</a>[m
[31m-            </p>[m
[31m-          )}[m
[32m+[m[32m            {formData.bio && ([m
[32m+[m[32m              <>[m
[32m+[m[32m                <p[m
[32m+[m[32m                  className={`mx-auto mt-3 text-[15px] text-gray-700 leading-relaxed ${[m
[32m+[m[32m                    bioExpanded ? "" : "line-clamp-3"[m
[32m+[m[32m                  } max-w-prose`}[m
[32m+[m[32m                >[m
[32m+[m[32m                  {formData.bio}[m
[32m+[m[32m                </p>[m
[32m+[m[32m                {formData.bio.length > 160 && ([m
[32m+[m[32m                  <button[m
[32m+[m[32m                    type="button"[m
[32m+[m[32m                    onClick={() => setBioExpanded(v => !v)}[m
[32m+[m[32m                    className="mt-1 text-sm text-gray-600 underline"[m
[32m+[m[32m                  >[m
[32m+[m[32m                    {bioExpanded ? "Show less" : "Read more"}[m
[32m+[m[32m                  </button>[m
[32m+[m[32m                )}[m
[32m+[m[32m              </>[m
[32m+[m[32m            )}[m
 [m
[31m-          {formData.bio && ([m
[31m-            <>[m
[31m-              <p[m
[31m-                className={`mx-auto mt-3 text-[15px] text-gray-700 leading-relaxed ${[m
[31m-                  bioExpanded ? "" : "line-clamp-3"[m
[31m-                } max-w-prose`}[m
[32m+[m[32m            <div className="mt-3 flex items-center justify-center gap-2">[m
[32m+[m[32m              <button[m
[32m+[m[32m                type="button"[m
[32m+[m[32m                onClick={() => router.push("/profile?edit=true")}[m
[32m+[m[32m                className="inline-flex items-center gap-2 rounded-xl border px-3 py-2 text-sm font-semibold hover:bg-gray-50"[m
[32m+[m[32m                aria-label="Edit profile"[m
               >[m
[31m-                {formData.bio}[m
[31m-              </p>[m
[31m-              {formData.bio.length > 160 && ([m
[31m-                <button[m
[31m-                  type="button"[m
[31m-                  onClick={() => setBioExpanded(v => !v)}[m
[31m-                  className="mt-1 text-sm text-gray-600 underline"[m
[31m-                >[m
[31m-                  {bioExpanded ? "Show less" : "Read more"}[m
[31m-                </button>[m
[31m-              )}[m
[31m-            </>[m
[31m-          )}[m
[32m+[m[32m                <Edit2 size={16} /> Edit Profile[m
[32m+[m[32m              </button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </section>[m
[32m+[m
[32m+[m[32m          {/* STATS GRID */}[m
[32m+[m[32m          <section className="grid grid-cols-3 gap-3" aria-labelledby="stats-heading">[m
[32m+[m[32m            <h2 id="stats-heading" className="sr-only">Profile statistics</h2>[m
 [m
[31m-          {/* Actions (owner only) */}[m
[31m-          <div className="mt-3 flex items-center justify-center gap-2">[m
             <button[m
               type="button"[m
[31m-              onClick={() => router.push("/profile?edit=true")}[m
[31m-              className="inline-flex items-center gap-2 rounded-xl border px-3 py-2 text-sm font-semibold hover:bg-gray-50"[m
[31m-              aria-label="Edit profile"[m
[32m+[m[32m              onClick={() => router.push("/matches")}[m
[32m+[m[32m              className="rounded-2xl border border-gray-200 bg-white p-4 shadow-sm text-center hover:bg-emerald-50/40 focus:outline-none focus:ring-2 focus:ring-emerald-600"[m
[32m+[m[32m              aria-label="View matches"[m
             >[m
[31m-              <Edit2 size={16} /> Edit Profile[m
[32m+[m[32m              <div className="mx-auto mb-2 flex h-8 w-8 items-center justify-center rounded-full bg-emerald-100 text-emerald-700">[m
[32m+[m[32m                <CalendarDays className="h-4 w-4" />[m
[32m+[m[32m              </div>[m
[32m+[m[32m              <div className="text-2xl font-bold tabular-nums">{matchStats.matches ?? 0}</div>[m
[32m+[m[32m              <div className="mt-1 text-sm text-gray-700">Matches</div>[m
             </button>[m
[31m-          </div>[m
[31m-        </section>[m
[31m-[m
[31m-        {/* STATS GRID */}[m
[31m-        <section className="grid grid-cols-3 gap-3" aria-labelledby="stats-heading">[m
[31m-          <h2 id="stats-heading" className="sr-only">Profile statistics</h2>[m
[31m-          {[[m
[31m-            { label: "Matches", value: matchStats.matches, href: "/matches", icon: <CalendarDays className="h-4 w-4" /> },[m
[31m-            { label: "Completed", value: matchStats.completed, href: "/matches?tab=completed", icon: <CheckCircle2 className="h-4 w-4" /> },[m
[31m-            { label: "Wins", value: matchStats.wins, href: "/matches?tab=wins", icon: <Trophy className="h-4 w-4" /> },[m
[31m-          ].map((s) => ([m
[32m+[m
             <button[m
[31m-              key={s.label}[m
               type="button"[m
[31m-              onClick={() => router.push(s.href)}[m
[32m+[m[32m              onClick={() => router.push("/matches?tab=completed")}[m
               className="rounded-2xl border border-gray-200 bg-white p-4 shadow-sm text-center hover:bg-emerald-50/40 focus:outline-none focus:ring-2 focus:ring-emerald-600"[m
[31m-              aria-label={`View ${s.label.toLowerCase()}`}[m
[32m+[m[32m              aria-label="View completed matches"[m
             >[m
               <div className="mx-auto mb-2 flex h-8 w-8 items-center justify-center rounded-full bg-emerald-100 text-emerald-700">[m
[31m-                {s.icon}[m
[32m+[m[32m                <CheckCircle2 className="h-4 w-4" />[m
               </div>[m
[31m-              <div className="text-2xl font-bold tabular-nums">{s.value ?? 0}</div>[m
[31m-              <div className="mt-1 text-sm text-gray-700">{s.label}</div>[m
[32m+[m[32m              <div className="text-2xl font-bold tabular-nums">{matchStats.completed ?? 0}</div>[m
[32m+[m[32m              <div className="mt-1 text-sm text-gray-700">Completed</div>[m
             </button>[m
[31m-          ))}[m
[31m-        </section>[m
[31m-[m
[31m-        {/* AVAILABILITY */}[m
[31m-        <section className="rounded-2xl border border-gray-200 bg-white p-5 shadow-sm" aria-labelledby="availability-heading">[m
[31m-          <h2 id="availability-heading" className="text-lg font-semibold">Availability</h2>[m
[31m-          {formData.availability?.length ? ([m
[31m-            <div className="mt-2 flex flex-wrap gap-2">[m
[31m-              {formData.availability.map((slot) => ([m
[31m-                <button[m
[31m-                  key={slot}[m
[31m-                  type="button"[m
[31m-                  onClick={() => router.push(`/match?availability=${encodeURIComponent(slot)}`)}[m
[31m-                  className="rounded-full border border-emerald-200 bg-emerald-50 text-emerald-800 px-3 py-1 text-sm hover:bg-emerald-100 focus:outline-none focus:ring-2 focus:ring-emerald-600"[m
[31m-                >[m
[31m-                  {slot}[m
[31m-                </button>[m
[31m-              ))}[m
[31m-            </div>[m
[31m-          ) : ([m
[31m-            <p className="mt-2 text-sm text-gray-600">No availability set.</p>[m
[31m-          )}[m
[31m-        </section>[m
[31m-[m
[31m-        {/* BADGES */}[m
[31m-        <section className="rounded-2xl border border-gray-200 bg-white p-5 shadow-sm" aria-labelledby="badges-heading">[m
[31m-          <h2 id="badges-heading" className="text-lg font-semibold">Badges</h2>[m
[31m-          <div className="mt-3 grid grid-cols-2 sm:grid-cols-4 gap-4 text-center">[m
[31m-            <div className="rounded-xl border border-gray-200 bg-white p-3 hover:bg-gray-50" title="Thanks for being part of the MVP launch!">[m
[31m-              <img src="/badges/mvp-badge.svg" width={64} height={64} alt="MVP Launch" className="mx-auto" />[m
[31m-              <span className="text-xs mt-1 block">MVP Launch</span>[m
[31m-            </div>[m
[31m-            <div className="rounded-xl border border-gray-200 bg-white p-3 hover:bg-gray-50" title="Complete your first match">[m
[31m-              <img[m
[31m-                src={formData.badges.includes("firstMatch") ? "/badges/first-match.svg" : "/badges/first-match-locked.svg"}[m
[31m-                alt="First Match"[m
[31m-                width={64}[m
[31m-                height={64}[m
[31m-                className={`mx-auto ${formData.badges.includes("firstMatch") ? "" : "opacity-40"}`}[m
[31m-              />[m
[31m-              <span className="text-xs mt-1 block">First Match</span>[m
[31m-            </div>[m
[31m-            <div className="rounded-xl border border-gray-200 bg-white p-3 hover:bg-gray-50" title="Finish your first completed match">[m
[31m-              <img[m
[31m-                src={formData.badges.includes("firstMatchComplete") ? "/badges/first-match-complete.svg" : "/badges/first-match-complete-locked.svg"}[m
[31m-                alt="First Match Complete"[m
[31m-                width={64}[m
[31m-                height={64}[m
[31m-                className={`mx-auto ${formData.badges.includes("firstMatchComplete") ? "" : "opacity-40"}`}[m
[31m-              />[m
[31m-              <span className="text-xs mt-1 block">First Match Complete</span>[m
[31m-            </div>[m
[31m-            <div className="rounded-xl border border-gray-200 bg-white p-3 hover:bg-gray-50" title="Win your first match">[m
[31m-              <img[m
[31m-                src={formData.badges.includes("firstWin") ? "/badges/first-win.svg" : "/badges/first-win-locked.svg"}[m
[31m-                alt="First Win"[m
[31m-                width={64}[m
[31m-                height={64}[m
[31m-                className={`mx-auto ${formData.badges.includes("firstWin") ? "" : "opacity-40"}`}[m
[31m-              />[m
[31m-              <span className="text-xs mt-1 block">First Win</span>[m
[31m-            </div>[m
[31m-          </div>[m
[31m-        </section>[m
[31m-      </>[m
[31m-    ) : ([m
[31m-      <>[m
[31m-        <section className="rounded-2xl border bg-white p-5 sm:p-6 shadow-sm">[m
[31m-          <h2 className="text-lg font-semibold mb-4">Edit profile</h2>[m
[32m+[m
[32m+[m[32m            <button[m
[32m+[m[32m              type="button"[m
[32m+[m[32m              onClick={() => router.push("/matches?tab=wins")}[m
[32m+[m[32m              className="rounded-2xl border border-gray-200 bg-white p-4 shadow-sm text-center hover:bg-emerald-50/40 focus:outline-none focus:ring-2 focus:ring-emerald-600"[m
[32m+[m[32m              aria-label="View wins"[m
[32m+[m[32m            >[m
[32m+[m[32m              <div className="mx-auto mb-2 flex h-8 w-8 items-center justify-center rounded-full bg-emerald-100 text-emerald-700">[m
[32m+[m[32m                <Trophy className="h-4 w-4" />[m
[32m+[m[32m              </div>[m
[32m+[m[32m              <div className="text-2xl font-bold tabular-nums">{matchStats.wins ?? 0}</div>[m
[32m+[m[32m              <div className="mt-1 text-sm text-gray-700">Wins</div>[m
[32m+[m[32m            </button>[m
[32m+[m[32m          </section>[m
[32m+[m
[32m+[m[32m          {/* AVAILABILITY */}[m
[32m+[m[32m          <section className="rounded-2xl border border-gray-200 bg-white p-5 shadow-sm" aria-labelledby="availability-heading">[m
[32m+[m[32m            <h2 id="availability-heading" className="text-lg font-semibold">Availability</h2>[m
[32m+[m[32m            {formData.availability?.length ? ([m
[32m+[m[32m              <div className="mt-2 flex flex-wrap gap-2">[m
[32m+[m[32m                {formData.availability.map((slot) => ([m
[32m+[m[32m                  <button[m
[32m+[m[32m                    key={slot}[m
[32m+[m[32m                    type="button"[m
[32m+[m[32m                    onClick={() => router.push(`/match?availability=${encodeURIComponent(slot)}`)}[m
[32m+[m[32m                    className="rounded-full border border-emerald-200 bg-emerald-50 text-emerald-800 px-3 py-1 text-sm hover:bg-emerald-100 focus:outline-none focus:ring-2 focus:ring-emerald-600"[m
[32m+[m[32m                  >[m
[32m+[m[32m                    {slot}[m
[32m+[m[32m                  </button>[m
[32m+[m[32m                ))}[m
[32m+[m[32m              </div>[m
[32m+[m[32m            ) : ([m
[32m+[m[32m              <p className="mt-2 text-sm text-gray-600">No availability set.</p>[m
[32m+[m[32m            )}[m
[32m+[m[32m          </section>[m
[32m+[m
[32m+[m[32m          {/* BADGES */}[m
[32m+[m[32m<section className="rounded-2xl border border-gray-200 bg-white p-5 shadow-sm" aria-labelledby="badges-heading">[m
[32m+[m[32m  <h2 id="badges-heading" className="text-lg font-semibold">Badges</h2>[m
[32m+[m[32m  <div className="mt-3 grid grid-cols-2 sm:grid-cols-4 gap-4 text-center">[m
[32m+[m[32m    <div className="rounded-xl border border-gray-200 bg-white p-3 hover:bg-gray-50" title="Thanks for being part of the MVP launch!">[m
[32m+[m[32m      <img src="/badges/mvp-badge.svg" width={64} height={64} alt="MVP Launch" className="mx-auto" />[m
[32m+[m[32m      <span className="text-xs mt-1 block">MVP Launch</span>[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m[32m    <div className="rounded-xl border border-gray-200 bg-white p-3 hover:bg-gray-50" title="Complete your first match">[m
[32m+[m[32m      <img[m
[32m+[m[32m        src={formData.badges.includes("firstMatch") ? "/badges/first-match.svg" : "/badges/first-match-locked.svg"}[m
[32m+[m[32m        alt="First Match"[m
[32m+[m[32m        width={64}[m
[32m+[m[32m        height={64}[m
[32m+[m[32m        className={`mx-auto ${formData.badges.includes("firstMatch") ? "" : "opacity-40"}`}[m
[32m+[m[32m      />[m
[32m+[m[32m      <span className="text-xs mt-1 block">First Match</span>[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m[32m    <div className="rounded-xl border border-gray-200 bg-white p-3 hover:bg-gray-50" title="Finish your first completed match">[m
[32m+[m[32m      <img[m
[32m+[m[32m        src={formData.badges.includes("firstMatchComplete") ? "/badges/first-match-complete.svg" : "/badges/first-match-complete-locked.svg"}[m
[32m+[m[32m        alt="First Match Complete"[m
[32m+[m[32m        width={64}[m
[32m+[m[32m        height={64}[m
[32m+[m[32m        className={`mx-auto ${formData.badges.includes("firstMatchComplete") ? "" : "opacity-40"}`}[m
[32m+[m[32m      />[m
[32m+[m[32m      <span className="text-xs mt-1 block">First Match Complete</span>[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m[32m    <div className="rounded-xl border border-gray-200 bg-white p-3 hover:bg-gray-50" title="Win your first match">[m
[32m+[m[32m      <img[m
[32m+[m[32m        src={formData.badges.includes("firstWin") ? "/badges/first-win.svg" : "/badges/first-win-locked.svg"}[m
[32m+[m[32m        alt="First Win"[m
[32m+[m[32m        width={64}[m
[32m+[m[32m        height={64}[m
[32m+[m[32m        className={`mx-auto ${formData.badges.includes("firstWin") ? "" : "opacity-40"}`}[m
[32m+[m[32m      />[m
[32m+[m[32m      <span className="text-xs mt-1 block">First Win</span>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</section>[m
[32m+[m
[32m+[m[32m        </>[m
[32m+[m[32m      ) : ([m
[32m+[m[32m        <>[m
[32m+[m[32m          <section className="rounded-2xl border bg-white p-5 sm:p-6 shadow-sm">[m
[32m+[m[32m            <h2 className="text-lg font-semibold mb-4">Edit profile</h2>[m
 [m
           <form id="editProfile" onSubmit={handleSubmit} className="space-y-5">[m
[31m-            {/* Name */}[m
[31m-            <div>[m
[31m-              <label className="block text-sm font-medium text-gray-800">[m
[31m-                Name <span className="text-red-600">*</span>[m
[31m-              </label>[m
[31m-              <input[m
[31m-                name="name"[m
[31m-                required[m
[31m-                value={formData.name}[m
[31m-                onChange={handleChange}[m
[31m-                className="mt-1 w-full rounded-xl border px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-green-600 bg-white"[m
[31m-              />[m
[31m-            </div>[m
[32m+[m[32m  {/* Name */}[m
[32m+[m[32m  <div>[m
[32m+[m[32m    <label className="block text-sm font-medium text-gray-800">[m
[32m+[m[32m      Name <span className="text-red-600">*</span>[m
[32m+[m[32m    </label>[m
[32m+[m[32m    <input[m
[32m+[m[32m      name="name"[m
[32m+[m[32m      required[m
[32m+[m[32m      value={formData.name}[m
[32m+[m[32m      onChange={handleChange}[m
[32m+[m[32m      className="mt-1 w-full rounded-xl border px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-green-600 bg-white"[m
[32m+[m[32m    />[m
[32m+[m[32m  </div>[m
 [m
[31m-            {/* Postcode */}[m
[31m-            <div>[m
[31m-              <label className="block text-sm font-medium text-gray-800">[m
[31m-                Postcode <span className="text-red-600">*</span>[m
[31m-              </label>[m
[31m-              <input[m
[31m-                name="postcode"[m
[31m-                inputMode="numeric"[m
[31m-                pattern="[0-9]{4}"[m
[31m-                placeholder="4-digit postcode"[m
[31m-                value={formData.postcode}[m
[31m-                onChange={handleChange}[m
[31m-                className="mt-1 w-full rounded-xl border px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-green-600 bg-white"[m
[31m-              />[m
[31m-              <p className="mt-1 text-xs text-gray-500">Australian 4-digit format (e.g. 3000).</p>[m
[31m-            </div>[m
[32m+[m[32m  {/* Postcode */}[m
[32m+[m[32m  <div>[m
[32m+[m[32m    <label className="block text-sm font-medium text-gray-800">[m
[32m+[m[32m      Postcode <span className="text-red-600">*</span>[m
[32m+[m[32m    </label>[m
[32m+[m[32m    <input[m
[32m+[m[32m      name="postcode"[m
[32m+[m[32m      inputMode="numeric"[m
[32m+[m[32m      pattern="[0-9]{4}"[m
[32m+[m[32m      placeholder="4-digit postcode"[m
[32m+[m[32m      value={formData.postcode}[m
[32m+[m[32m      onChange={handleChange}[m
[32m+[m[32m      className="mt-1 w-full rounded-xl border px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-green-600 bg-white"[m
[32m+[m[32m    />[m
[32m+[m[32m    <p className="mt-1 text-xs text-gray-500">Australian 4-digit format (e.g. 3000).</p>[m
[32m+[m[32m  </div>[m
 [m
[31m-            {/* Skill level */}[m
[31m-            <div>[m
[31m-              <label className="block text-sm font-medium text-gray-800">[m
[31m-                Skill Level <span className="text-red-600">*</span>[m
[31m-              </label>[m
[31m-              <select[m
[31m-                name="skillLevel"[m
[31m-                required[m
[31m-                value={formData.skillLevel}[m
[31m-                onChange={handleChange}[m
[31m-                className="mt-1 w-full rounded-xl border px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-green-600 bg-white"[m
[31m-              >[m
[31m-                <option value="">Select</option>[m
[31m-                <option value="Beginner">Beginner</option>[m
[31m-                <option value="Intermediate">Intermediate</option>[m
[31m-                <option value="Advanced">Advanced</option>[m
[31m-              </select>[m
[31m-            </div>[m
[32m+[m[32m  {/* Skill level */}[m
[32m+[m[32m  <div>[m
[32m+[m[32m    <label className="block text-sm font-medium text-gray-800">[m
[32m+[m[32m      Skill Level <span className="text-red-600">*</span>[m
[32m+[m[32m    </label>[m
[32m+[m[32m    <select[m
[32m+[m[32m      name="skillBand"[m
[32m+[m[32m      required[m
[32m+[m[32m      value={formData.skillBand}[m
[32m+[m[32m      onChange={(e) => setFormData(prev => ({ ...prev, skillBand: e.target.value as SkillBand }))}[m
[32m+[m[32m      className="mt-1 w-full rounded-xl border px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-green-600 bg-white"[m
[32m+[m[32m    >[m
[32m+[m[32m      <option value="" disabled>Select your level…</option>[m
[32m+[m[32m      {SKILL_OPTIONS_SAFE.map(o => ([m
[32m+[m[32m        <option key={o.value} value={o.value}>{o.label}</option>[m
[32m+[m[32m      ))}[m
[32m+[m[32m    </select>[m
[32m+[m
[32m+[m[32m{typeof formData.rating === "number" && ([m
[32m+[m[32m  <p className="mt-1 text-xs text-gray-500">[m
[32m+[m[32m    Based on TMR {formData.rating.toFixed(2)}, suggested level is{" "}[m
[32m+[m[32m    <strong>[m
[32m+[m[32m      {(Array.isArray(SKILL_OPTIONS) ? SKILL_OPTIONS : [])[m
[32m+[m[32m        .find(s => s.value === (skillFromUTR(formData.rating) ?? ""))?.label ?? "—"}[m
[32m+[m[32m    </strong>.[m
[32m+[m[32m  </p>[m
[32m+[m[32m)}[m
 [m
[31m-            {/* Availability */}[m
[31m-            <fieldset>[m
[31m-              <legend className="block text-sm font-medium text-gray-800">Availability</legend>[m
[31m-              <div className="mt-1 grid grid-cols-1 sm:grid-cols-2 gap-1">[m
[31m-                {["Weekdays AM","Weekdays PM","Weekends AM","Weekends PM"].map((slot) => ([m
[31m-                  <label key={slot} className="flex items-center gap-2 text-sm py-1">[m
[31m-                    <input[m
[31m-                      type="checkbox"[m
[31m-                      value={slot}[m
[31m-                      checked={formData.availability.includes(slot)}[m
[31m-                      onChange={handleCheckbox}[m
[31m-                      className="h-4 w-4"[m
[31m-                    />[m
[31m-                    {slot}[m
[31m-                  </label>[m
[31m-                ))}[m
[31m-              </div>[m
[31m-            </fieldset>[m
[31m-[m
[31m-            {/* Bio */}[m
[31m-            <div>[m
[31m-              <label className="block text-sm font-medium text-gray-800">Bio</label>[m
[31m-              <textarea[m
[31m-                name="bio"[m
[31m-                rows={5}[m
[31m-                maxLength={300}[m
[31m-                placeholder="Tell others about your game, favorite courts, preferred times…"[m
[31m-                value={formData.bio}[m
[31m-                onChange={handleChange}[m
[31m-                className="mt-1 w-full min-h-[8rem] resize-y rounded-xl border px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-green-600 bg-white"[m
[31m-              />[m
[31m-              <div className="mt-1 text-xs text-gray-500">{formData.bio.length}/300</div>[m
[31m-            </div>[m
 [m
[31m-            {/* Photo */}[m
[31m-            <div className="flex items-center gap-4">[m
[31m-              {previewURL ? ([m
[31m-                <img[m
[31m-                  src={previewURL}[m
[31m-                  className="h-20 w-20 rounded-full object-cover ring-2 ring-gray-200"[m
[31m-                  alt="Preview"[m
[31m-                />[m
[31m-              ) : ([m
[31m-                <div className="h-20 w-20 rounded-full bg-gray-100 ring-2 ring-gray-200" />[m
[31m-              )}[m
[32m+[m[32m  </div>[m
 [m
[31m-              <div className="flex flex-wrap gap-2">[m
[31m-                <label[m
[31m-                  htmlFor="upload"[m
[31m-                  className="cursor-pointer inline-block rounded-xl bg-green-600 text-white px-3 py-2 text-sm font-semibold shadow hover:bg-green-700"[m
[31m-                >[m
[31m-                  Choose Photo[m
[31m-                </label>[m
[31m-                <input[m
[31m-                  id="upload"[m
[31m-                  type="file"[m
[31m-                  accept="image/*"[m
[31m-                  onChange={handleImageChange}[m
[31m-                  className="hidden"[m
[31m-                />[m
[31m-[m
[31m-                {previewURL && ([m
[32m+[m[32m  {/* UTR (optional) */}[m
[32m+[m[32m  <div>[m
[32m+[m[32m    <label className="block text-sm font-medium text-gray-800">[m
[32m+[m[32m  {RATING_LABEL} (optional)[m
[32m+[m[32m</label>[m
[32m+[m[32m<input[m
[32m+[m[32m  type="number"[m
[32m+[m[32m  step="0.01"[m
[32m+[m[32m  min={1}[m
[32m+[m[32m  max={16.5}[m
[32m+[m[32m  inputMode="decimal"[m
[32m+[m[32m  placeholder="e.g., 6.20"[m
[32m+[m[32m  value={formData.rating}[m
[32m+[m[32m  onChange={(e) => handleRatingChange(e.target.value)}[m
[32m+[m[32m  className="mt-1 w-full rounded-xl border px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-green-600 bg-white"[m
[32m+[m[32m/>[m
[32m+[m[32m<p className="mt-1 text-xs text-gray-500">[m
[32m+[m[32m  1.00–16.50. Comparable to UTR® (TennisMate is not affiliated with Universal Tennis).[m
[32m+[m[32m</p>[m
[32m+[m[32m  </div>[m
[32m+[m
[32m+[m[32m  {/* Availability */}[m
[32m+[m[32m  <fieldset>[m
[32m+[m[32m    <legend className="block text-sm font-medium text-gray-800">Availability</legend>[m
[32m+[m[32m    <div className="mt-1 grid grid-cols-1 sm:grid-cols-2 gap-1">[m
[32m+[m[32m      {["Weekdays AM","Weekdays PM","Weekends AM","Weekends PM"].map((slot) => ([m
[32m+[m[32m        <label key={slot} className="flex items-center gap-2 text-sm py-1">[m
[32m+[m[32m          <input[m
[32m+[m[32m            type="checkbox"[m
[32m+[m[32m            value={slot}[m
[32m+[m[32m            checked={formData.availability.includes(slot)}[m
[32m+[m[32m            onChange={handleCheckbox}[m
[32m+[m[32m            className="h-4 w-4"[m
[32m+[m[32m          />[m
[32m+[m[32m          {slot}[m
[32m+[m[32m        </label>[m
[32m+[m[32m      ))}[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </fieldset>[m
[32m+[m
[32m+[m[32m  {/* Bio */}[m
[32m+[m[32m  <div>[m
[32m+[m[32m    <label className="block text-sm font-medium text-gray-800">Bio</label>[m
[32m+[m[32m    <textarea[m
[32m+[m[32m      name="bio"[m
[32m+[m[32m      rows={5}[m
[32m+[m[32m      maxLength={300}[m
[32m+[m[32m      placeholder="Tell others about your game, favorite courts, preferred times…"[m
[32m+[m[32m      value={formData.bio}[m
[32m+[m[32m      onChange={handleChange}[m
[32m+[m[32m      className="mt-1 w-full min-h-[8rem] resize-y rounded-xl border px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-green-600 bg-white"[m
[32m+[m[32m    />[m
[32m+[m[32m    <div className="mt-1 text-xs text-gray-500">{formData.bio.length}/300</div>[m
[32m+[m[32m  </div>[m
[32m+[m
[32m+[m[32m  {/* Photo */}[m
[32m+[m[32m  <div className="flex items-center gap-4">[m
[32m+[m[32m    {previewURL ? ([m
[32m+[m[32m      <img[m
[32m+[m[32m        src={previewURL}[m
[32m+[m[32m        className="h-20 w-20 rounded-full object-cover ring-2 ring-gray-200"[m
[32m+[m[32m        alt="Preview"[m
[32m+[m[32m      />[m
[32m+[m[32m    ) : ([m
[32m+[m[32m      <div className="h-20 w-20 rounded-full bg-gray-100 ring-2 ring-gray-200" />[m
[32m+[m[32m    )}[m
[32m+[m
[32m+[m[32m    <div className="flex flex-wrap gap-2">[m
[32m+[m[32m      <label[m
[32m+[m[32m        htmlFor="upload"[m
[32m+[m[32m        className="cursor-pointer inline-block rounded-xl bg-green-600 text-white px-3 py-2 text-sm font-semibold shadow hover:bg-green-700"[m
[32m+[m[32m      >[m
[32m+[m[32m        Choose Photo[m
[32m+[m[32m      </label>[m
[32m+[m[32m      <input[m
[32m+[m[32m        id="upload"[m
[32m+[m[32m        type="file"[m
[32m+[m[32m        accept="image/*"[m
[32m+[m[32m        onChange={handleImageChange}[m
[32m+[m[32m        className="hidden"[m
[32m+[m[32m      />[m
[32m+[m
[32m+[m[32m      {previewURL && ([m
[32m+[m[32m        <button[m
[32m+[m[32m          type="button"[m
[32m+[m[32m          onClick={handleRemovePhoto}[m
[32m+[m[32m          className="rounded-xl border px-3 py-2 text-sm hover:bg-gray-50"[m
[32m+[m[32m        >[m
[32m+[m[32m          Remove Photo[m
[32m+[m[32m        </button>[m
[32m+[m[32m      )}[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</form>[m
[32m+[m
[32m+[m[32m          </section>[m
[32m+[m
[32m+[m[32m          {/* Cropper modal */}[m
[32m+[m[32m          {showCropper && imageSrc && ([m
[32m+[m[32m            <div className="fixed inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center z-50">[m
[32m+[m[32m              <div className="bg-white rounded-xl shadow-lg p-4 flex flex-col items-center justify-center w-[340px]">[m
[32m+[m[32m                <div className="relative w-[300px] h-[300px]">[m
[32m+[m[32m                  <Cropper[m
[32m+[m[32m                    image={imageSrc}[m
[32m+[m[32m                    crop={crop}[m
[32m+[m[32m                    zoom={zoom}[m
[32m+[m[32m                    aspect={1}[m
[32m+[m[32m                    cropShape="round"[m
[32m+[m[32m                    showGrid={true}[m
[32m+[m[32m                    onCropChange={setCrop}[m
[32m+[m[32m                    onZoomChange={setZoom}[m
[32m+[m[32m                    onCropComplete={handleCropComplete}[m
[32m+[m[32m                  />[m
[32m+[m[32m                </div>[m
[32m+[m[32m                <div className="mt-4 flex gap-2">[m
[32m+[m[32m                  <button[m
[32m+[m[32m                    type="button"[m
[32m+[m[32m                    onClick={showCroppedImage}[m
[32m+[m[32m                    className="rounded-xl bg-green-600 px-4 py-2 text-white text-sm font-semibold shadow hover:bg-green-700"[m
[32m+[m[32m                  >[m
[32m+[m[32m                    {/* prevents form submit */}[m
[32m+[m[32m                    Confirm Crop[m
[32m+[m[32m                  </button>[m
                   <button[m
                     type="button"[m
[31m-                    onClick={handleRemovePhoto}[m
[32m+[m[32m                    onClick={() => setShowCropper(false)}[m
                     className="rounded-xl border px-3 py-2 text-sm hover:bg-gray-50"[m
                   >[m
[31m-                    Remove Photo[m
[32m+[m[32m                    Cancel[m
                   </button>[m
[31m-                )}[m
[31m-              </div>[m
[31m-            </div>[m
[31m-          </form>[m
[31m-        </section>[m
[31m-[m
[31m-        {/* Cropper modal */}[m
[31m-        {showCropper && imageSrc && ([m
[31m-          <div className="fixed inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center z-50">[m
[31m-            <div className="bg-white rounded-xl shadow-lg p-4 flex flex-col items-center justify-center w-[340px]">[m
[31m-              <div className="relative w-[300px] h-[300px]">[m
[31m-                <Cropper[m
[31m-                  image={imageSrc}[m
[31m-                  crop={crop}[m
[31m-                  zoom={zoom}[m
[31m-                  aspect={1}[m
[31m-                  cropShape="round"[m
[31m-                  showGrid={true}[m
[31m-                  onCropChange={setCrop}[m
[31m-                  onZoomChange={setZoom}[m
[31m-                  onCropComplete={handleCropComplete}[m
[31m-                />[m
[31m-              </div>[m
[31m-              <div className="mt-4 flex gap-2">[m
[31m-                <button[m
[31m-                  type="button" /* prevents form submit */[m
[31m-                  onClick={showCroppedImage}[m
[31m-                  className="rounded-xl bg-green-600 px-4 py-2 text-white text-sm font-semibold shadow hover:bg-green-700"[m
[31m-                >[m
[31m-                  Confirm Crop[m
[31m-                </button>[m
[31m-                <button[m
[31m-                  type="button"[m
[31m-                  onClick={() => setShowCropper(false)}[m
[31m-                  className="rounded-xl border px-3 py-2 text-sm hover:bg-gray-50"[m
[31m-                >[m
[31m-                  Cancel[m
[31m-                </button>[m
[32m+[m[32m                </div>[m
               </div>[m
             </div>[m
[31m-          </div>[m
[31m-        )}[m
[32m+[m[32m          )}[m
 [m
[31m-        {/* Actions + compact danger zone */}[m
[31m-        <section className="mt-4 rounded-2xl border bg-white p-5 sm:p-6 shadow-sm">[m
[31m-          <div className="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">[m
[31m-            <div className="flex items-center gap-3">[m
[31m-              <button[m
[31m-                type="button"[m
[31m-                onClick={() => router.push("/profile")}[m
[31m-                className="text-sm text-gray-600 underline hover:text-gray-900"[m
[31m-              >[m
[31m-                Cancel[m
[31m-              </button>[m
[31m-              <button[m
[31m-                form="editProfile"[m
[31m-                type="submit"[m
[31m-                disabled={saving}[m
[31m-                className="rounded-xl bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow hover:bg-green-700 disabled:opacity-50"[m
[31m-              >[m
[31m-                {saving ? "Saving…" : "Save Profile"}[m
[31m-              </button>[m
[31m-            </div>[m
[32m+[m[32m        {/* Actions + danger zone */}[m
[32m+[m[32m<section className="mt-4 rounded-2xl border bg-white p-5 sm:p-6 shadow-sm">[m
[32m+[m[32m  <div className="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">[m
[32m+[m[32m    <div className="flex items-center gap-3">[m
[32m+[m[32m      <button[m
[32m+[m[32m        type="button"[m
[32m+[m[32m        onClick={() => router.push("/profile")}[m
[32m+[m[32m        className="text-sm text-gray-600 underline hover:text-gray-900"[m
[32m+[m[32m      >[m
[32m+[m[32m        Cancel[m
[32m+[m[32m      </button>[m
[32m+[m[32m      <button[m
[32m+[m[32m        form="editProfile"[m
[32m+[m[32m        type="submit"[m
[32m+[m[32m        disabled={saving}[m
[32m+[m[32m        className="rounded-xl bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow hover:bg-green-700 disabled:opacity-50"[m
[32m+[m[32m      >[m
[32m+[m[32m        {saving ? "Saving…" : "Save Profile"}[m
[32m+[m[32m      </button>[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m[32m    <div className="text-right">[m
[32m+[m[32m      <p className="text-xs font-medium text-red-700">Danger zone</p>[m
[32m+[m[32m      <p className="mt-0.5 text-[11px] leading-4 text-gray-600">[m
[32m+[m[32m        Permanently delete your profile and data.[m
[32m+[m[32m      </p>[m
[32m+[m[32m      <button[m
[32m+[m[32m        type="button"[m
[32m+[m[32m        onClick={handleDeleteProfile}[m
[32m+[m[32m        className="mt-1.5 rounded-lg border border-red-200 bg-red-50 px-2 py-1 text-xs font-semibold text-red-700 hover:bg-red-100"[m
[32m+[m[32m      >[m
[32m+[m[32m        Delete Profile[m
[32m+[m[32m      </button>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</section>[m
 [m
[31m-            <div className="text-right">[m
[31m-              <p className="text-xs font-medium text-red-700">Danger zone</p>[m
[31m-              <p className="mt-0.5 text-[11px] leading-4 text-gray-600">[m
[31m-                Permanently delete your profile and data.[m
[31m-              </p>[m
[31m-              <button[m
[31m-                type="button"[m
[31m-                onClick={handleDeleteProfile}[m
[31m-                className="mt-1.5 rounded-lg border border-red-200 bg-red-50 px-2 py-1 text-xs font-semibold text-red-700 hover:bg-red-100"[m
[31m-              >[m
[31m-                Delete Profile[m
[31m-              </button>[m
[31m-            </div>[m
[31m-          </div>[m
[31m-        </section>[m
[31m-      </>[m
[31m-    )}[m
[32m+[m[32m        </>[m
[32m+[m[32m      )}[m
 [m
[31m-    {status && <p className="text-sm mt-2">{status}</p>}[m
[31m-  </div>[m
[31m-);[m
[31m-}[m
\ No newline at end of file[m
[32m+[m[32m      {status && <p className="text-sm mt-2">{status}</p>}[m
[32m+[m[32m    </div>[m
[32m+[m[32m  );[m
[32m+[m[32m}[m
[1mdiff --git a/app/signup/page.tsx b/app/signup/page.tsx[m
[1mindex 19f68d1..c09b355 100644[m
[1m--- a/app/signup/page.tsx[m
[1m+++ b/app/signup/page.tsx[m
[36m@@ -1,3 +1,4 @@[m
[32m+[m[32m// app/signup/page.tsx[m
 "use client";[m
 [m
 import { useState } from "react";[m
[36m@@ -11,9 +12,12 @@[m [mimport Cropper from "react-easy-crop";[m
 import getCroppedImg from "../utils/cropImage";[m
 import Link from "next/link";[m
 import Image from "next/image";[m
[31m-import { Mail, Lock, User, MapPin } from "lucide-react";[m
[32m+[m[32mimport { Mail, Lock, User, MapPin, Camera } from "lucide-react";[m
[32m+[m
[32m+[m[32mimport { clampUTR, SKILL_OPTIONS, skillFromUTR, type SkillBand } from "@/lib/skills";[m
 [m
 const DEFAULT_AVATAR = "/images/default-avatar.jpg";[m
[32m+[m[32mconst RATING_LABEL = "TennisMate Rating (TMR)";[m
 [m
 export default function SignupPage() {[m
   const [showEmailExistsModal, setShowEmailExistsModal] = useState(false);[m
[36m@@ -24,7 +28,8 @@[m [mexport default function SignupPage() {[m
     email: "",[m
     password: "",[m
     postcode: "",[m
[31m-    skillLevel: "",[m
[32m+[m[32m    skillBand: "" as SkillBand | "",[m
[32m+[m[32m    rating: "" as number | "",[m
     availability: [] as string[],[m
     bio: "",[m
   });[m
[36m@@ -32,7 +37,7 @@[m [mexport default function SignupPage() {[m
   const [showWaitlistModal, setShowWaitlistModal] = useState(false);[m
   const [isPasswordFocused, setIsPasswordFocused] = useState(false);[m
   const [status, setStatus] = useState("");[m
[31m-const [previewURL, setPreviewURL] = useState<string>(DEFAULT_AVATAR);[m
[32m+[m[32m  const [previewURL, setPreviewURL] = useState<string>(DEFAULT_AVATAR);[m
 [m
   // Cropper state[m
   const [showCropper, setShowCropper] = useState(false);[m
[36m@@ -41,9 +46,12 @@[m [mconst [previewURL, setPreviewURL] = useState<string>(DEFAULT_AVATAR);[m
   const [crop, setCrop] = useState({ x: 0, y: 0 });[m
   const [zoom, setZoom] = useState(1);[m
   const [croppedAreaPixels, setCroppedAreaPixels] = useState<any>(null);[m
[31m-  const [errors, setErrors] = useState<{[k:string]: string}>({});[m
 [m
[31m-  // Password criteria helper function[m
[32m+[m[32m  const [errors, setErrors] = useState<{ [k: string]: string }>({});[m
[32m+[m
[32m+[m[32m  // Derived: a real photo is required (must be cropped/confirmed)[m
[32m+[m[32m  const hasPhoto = !!croppedImage;[m
[32m+[m
   function getPasswordCriteria(password: string) {[m
     return {[m
       length: password.length >= 6,[m
[36m@@ -52,37 +60,58 @@[m [mconst [previewURL, setPreviewURL] = useState<string>(DEFAULT_AVATAR);[m
     };[m
   }[m
 [m
[31m-  // Calculate criteria state[m
   const passwordCriteria = getPasswordCriteria(formData.password);[m
   const isPasswordValid = Object.values(passwordCriteria).every(Boolean);[m
[31m-const isFormComplete =[m
[31m-  !!formData.name &&[m
[31m-  !!formData.email &&[m
[31m-  !!formData.password &&[m
[31m-  !!formData.postcode &&[m
[31m-  !!formData.skillLevel &&[m
[31m-  formData.availability.length > 0;[m
[31m-[m
[31m-const canSubmit = isFormComplete && isPasswordValid;[m
[31m-[m
[31m-[m
[31m-const handleChange = ([m
[31m-  e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>[m
[31m-) => {[m
[31m-  const { name, value } = e.target;[m
[31m-[m
[31m-  if (name === "postcode") {[m
[31m-    // keep only digits and cap at 4[m
[31m-    const digits = value.replace(/\D/g, "").slice(0, 4);[m
[31m-    setFormData((prev) => ({ ...prev, postcode: digits }));[m
[31m-    setErrors((prev) => ({ ...prev, postcode: "" }));[m
[31m-    return;[m
[31m-  }[m
 [m
[31m-  setFormData((prev) => ({ ...prev, [name]: value }));[m
[31m-  setErrors((prev) => ({ ...prev, [name]: "" }));[m
[31m-};[m
[32m+[m[32m  const isFormComplete =[m
[32m+[m[32m    !!formData.name &&[m
[32m+[m[32m    !!formData.email &&[m
[32m+[m[32m    !!formData.password &&[m
[32m+[m[32m    !!formData.postcode &&[m
[32m+[m[32m    !!formData.skillBand &&[m
[32m+[m[32m    formData.availability.length > 0 &&[m
[32m+[m[32m    hasPhoto; // ← MANDATORY PHOTO[m
[32m+[m
[32m+[m[32m  const canSubmit = isFormComplete && isPasswordValid;[m
[32m+[m
[32m+[m[32m  const handleChange = ([m
[32m+[m[32m    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>[m
[32m+[m[32m  ) => {[m
[32m+[m[32m    const { name, value } = e.target;[m
[32m+[m
[32m+[m[32m    if (name === "postcode") {[m
[32m+[m[32m      const digits = value.replace(/\D/g, "").slice(0, 4);[m
[32m+[m[32m      setFormData((prev) => ({ ...prev, postcode: digits }));[m
[32m+[m[32m      setErrors((prev) => ({ ...prev, postcode: "" }));[m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
 [m
[32m+[m[32m    if (name === "rating") {[m
[32m+[m[32m      if (value === "") {[m
[32m+[m[32m        setFormData((prev) => ({ ...prev, rating: "" }));[m
[32m+[m[32m        setErrors((prev) => ({ ...prev, rating: "" }));[m
[32m+[m[32m        return;[m
[32m+[m[32m      }[m
[32m+[m[32m      const n = Number(value);[m
[32m+[m[32m      if (Number.isNaN(n)) {[m
[32m+[m[32m        setFormData((prev) => ({ ...prev, rating: "" }));[m
[32m+[m[32m        setErrors((prev) => ({ ...prev, rating: "Enter a number like 6.20" }));[m
[32m+[m[32m        return;[m
[32m+[m[32m      }[m
[32m+[m[32m      const clamped = clampUTR(n);[m
[32m+[m[32m      const derived = skillFromUTR(clamped);[m
[32m+[m[32m      setFormData((prev) => ({[m
[32m+[m[32m        ...prev,[m
[32m+[m[32m        rating: clamped,[m
[32m+[m[32m        skillBand: derived || prev.skillBand,[m
[32m+[m[32m      }));[m
[32m+[m[32m      setErrors((prev) => ({ ...prev, rating: "" }));[m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    setFormData((prev) => ({ ...prev, [name]: value }));[m
[32m+[m[32m    setErrors((prev) => ({ ...prev, [name]: "" }));[m
[32m+[m[32m  };[m
 [m
   const handleCheckbox = (e: React.ChangeEvent<HTMLInputElement>) => {[m
     const { value, checked } = e.target;[m
[36m@@ -117,106 +146,119 @@[m [mconst handleChange = ([m
       setCroppedImage(file);[m
       setPreviewURL(URL.createObjectURL(file));[m
       setShowCropper(false);[m
[32m+[m[32m      setErrors((prev) => ({ ...prev, photo: "" }));[m
     } catch {[m
       setStatus("❌ Crop failed.");[m
     }[m
   };[m
 [m
[31m-const handleSubmit = async (e: React.FormEvent) => {[m
[31m-  e.preventDefault();[m
[32m+[m[32m  const handleSubmit = async (e: React.FormEvent) => {[m
[32m+[m[32m    e.preventDefault();[m
 [m
[31m-  if (!isPasswordValid) {[m
[31m-    setStatus("⚠️ Please meet all password requirements.");[m
[31m-    return;[m
[31m-  }[m
[32m+[m[32m    if (!isPasswordValid) {[m
[32m+[m[32m      setStatus("⚠️ Please meet all password requirements.");[m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
 [m
[31m-  // Basic required validation (incl. availability)[m
[31m-const newErrors: {[k:string]: string} = {};[m
[31m-if (!formData.name) newErrors.name = "Name is required.";[m
[31m-if (!formData.email) newErrors.email = "Email is required.";[m
[31m-if (!formData.password) newErrors.password = "Password is required.";[m
[31m-if (!formData.postcode) newErrors.postcode = "Postcode is required.";[m
[31m-if (!formData.skillLevel) newErrors.skillLevel = "Skill level is required.";[m
[31m-if (formData.availability.length === 0) newErrors.availability = "Pick at least one time slot.";[m
[31m-[m
[31m-setErrors(newErrors);[m
[31m-if (Object.keys(newErrors).length > 0) return;[m
[31m-[m
[31m-  setStatus("Submitting...");[m
[31m-[m
[31m-  const isVictorian = formData.postcode.trim().startsWith("3");[m
[31m-[m
[31m-  try {[m
[31m-    // 1) Create Auth user[m
[31m-    const userCredential = await createUserWithEmailAndPassword([m
[31m-      auth,[m
[31m-      formData.email,[m
[31m-      formData.password[m
[31m-    );[m
[31m-    const user = userCredential.user;[m
[31m-[m
[31m-    // 2) Upload profile photo (optional)[m
[31m-let photoURL = DEFAULT_AVATAR; // ✅ default until they upload[m
[31m-if (croppedImage) {[m
[31m-  const imageRef = ref(storage, `profile_pictures/${user.uid}/profile.jpg`);[m
[31m-  await uploadBytes(imageRef, croppedImage);[m
[31m-  photoURL = await getDownloadURL(imageRef);[m
[31m-}[m
[32m+[m[32m    const newErrors: { [k: string]: string } = {};[m
[32m+[m[32m    if (!formData.name) newErrors.name = "Name is required.";[m
[32m+[m[32m    if (!formData.email) newErrors.email = "Email is required.";[m
[32m+[m[32m    if (!formData.password) newErrors.password = "Password is required.";[m
[32m+[m[32m    if (!formData.postcode) newErrors.postcode = "Postcode is required.";[m
[32m+[m[32m    if (!formData.skillBand) newErrors.skillBand = "Skill level is required.";[m
[32m+[m[32m    if (formData.availability.length === 0)[m
[32m+[m[32m      newErrors.availability = "Pick at least one time slot.";[m
[32m+[m
[32m+[m[32m    if (!hasPhoto) {[m
[32m+[m[32m      newErrors.photo = "A profile photo is required. Please upload and confirm the crop.";[m
[32m+[m[32m    }[m
 [m
[31m-    // 3) Create users/{uid} first with verification flag[m
[31m-    await setDoc([m
[31m-      doc(db, "users", user.uid),[m
[31m-      {[m
[31m-        name: formData.name,[m
[31m-        email: formData.email,[m
[31m-        requireVerification: true,[m
[31m-        createdAt: serverTimestamp(),[m
[31m-      },[m
[31m-      { merge: true }[m
[31m-    );[m
[31m-[m
[31m-    if (isVictorian) {[m
[31m-      // 4) Create players/{uid}[m
[31m-      await setDoc(doc(db, "players", user.uid), {[m
[31m-        name: formData.name,[m
[31m-        nameLower: (formData.name || "").toLowerCase(),[m
[31m-        email: formData.email,[m
[31m-        postcode: formData.postcode,[m
[31m-        skillLevel: formData.skillLevel,[m
[31m-        availability: formData.availability,[m
[31m-        bio: formData.bio,[m
[31m-        photoURL,[m
[31m-        profileComplete: true,[m
[31m-        timestamp: serverTimestamp(),[m
[31m-      });[m
[31m-[m
[31m-      // 5) Go to the dedicated verify page—the user will send the email there[m
[31m-      setStatus("");[m
[31m-      router.replace("/verify-email");[m
[31m-    } else {[m
[31m-      // Waitlist flow (no verification email necessary)[m
[31m-      await setDoc(doc(db, "waitlist_users", user.uid), {[m
[31m-        name: formData.name,[m
[31m-        email: formData.email,[m
[31m-        postcode: formData.postcode,[m
[31m-        timestamp: serverTimestamp(),[m
[31m-        source: "signupForm",[m
[31m-      });[m
[31m-[m
[31m-      setShowWaitlistModal(true);[m
[31m-      setStatus("");[m
[32m+[m[32m    if (formData.rating !== "" && (formData.rating < 1 || formData.rating > 16.5)) {[m
[32m+[m[32m      newErrors.rating = "TMR must be between 1.00 and 16.50.";[m
     }[m
[31m-  } catch (error: any) {[m
[31m-    if (error?.code === "auth/email-already-in-use") {[m
[31m-      setShowEmailExistsModal(true);[m
[31m-    } else if (error?.code === "auth/weak-password") {[m
[31m-      setStatus("⚠️ Password must be at least 6 characters.");[m
[31m-    } else {[m
[31m-      console.error("Signup error:", error);[m
[31m-      setStatus("❌ Something went wrong. Please try again.");[m
[32m+[m
[32m+[m[32m    setErrors(newErrors);[m
[32m+[m[32m    if (Object.keys(newErrors).length > 0) return;[m
[32m+[m
[32m+[m[32m    setStatus("Submitting...");[m
[32m+[m
[32m+[m[32m    const isVictorian = formData.postcode.trim().startsWith("3");[m
[32m+[m
[32m+[m[32m    try {[m
[32m+[m[32m      // 1) Create Auth user[m
[32m+[m[32m      const userCredential = await createUserWithEmailAndPassword([m
[32m+[m[32m        auth,[m
[32m+[m[32m        formData.email,[m
[32m+[m[32m        formData.password[m
[32m+[m[32m      );[m
[32m+[m[32m      const user = userCredential.user;[m
[32m+[m
[32m+[m[32m      // 2) Upload REQUIRED profile photo[m
[32m+[m[32m      if (!croppedImage) {[m
[32m+[m[32m        setErrors((prev) => ({ ...prev, photo: "Please add a profile photo." }));[m
[32m+[m[32m        setStatus("");[m
[32m+[m[32m        return;[m
[32m+[m[32m      }[m
[32m+[m[32m      let photoURL = DEFAULT_AVATAR;[m
[32m+[m[32m      const imageRef = ref(storage, `profile_pictures/${user.uid}/profile.jpg`);[m
[32m+[m[32m      await uploadBytes(imageRef, croppedImage);[m
[32m+[m[32m      photoURL = await getDownloadURL(imageRef);[m
[32m+[m
[32m+[m[32m      // 3) users/{uid}[m
[32m+[m[32m      await setDoc([m
[32m+[m[32m        doc(db, "users", user.uid),[m
[32m+[m[32m        {[m
[32m+[m[32m          name: formData.name,[m
[32m+[m[32m          email: formData.email,[m
[32m+[m[32m          requireVerification: true,[m
[32m+[m[32m          createdAt: serverTimestamp(),[m
[32m+[m[32m        },[m
[32m+[m[32m        { merge: true }[m
[32m+[m[32m      );[m
[32m+[m
[32m+[m[32m      if (isVictorian) {[m
[32m+[m[32m        // 4) players/{uid} — canonical: skillRating; mirror: utr (temporary)[m
[32m+[m[32m        const ratingOrNull = formData.rating === "" ? null : formData.rating;[m
[32m+[m[32m        await setDoc(doc(db, "players", user.uid), {[m
[32m+[m[32m          name: formData.name,[m
[32m+[m[32m          nameLower: (formData.name || "").toLowerCase(),[m
[32m+[m[32m          email: formData.email,[m
[32m+[m[32m          postcode: formData.postcode,[m
[32m+[m[32m          skillRating: ratingOrNull,[m
[32m+[m[32m          utr: ratingOrNull, // TEMP[m
[32m+[m[32m          skillBand: formData.skillBand || null,[m
[32m+[m[32m          availability: formData.availability,[m
[32m+[m[32m          bio: formData.bio,[m
[32m+[m[32m          photoURL, // guaranteed real image[m
[32m+[m[32m          profileComplete: true,[m
[32m+[m[32m          timestamp: serverTimestamp(),[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        setStatus("");[m
[32m+[m[32m        router.replace("/verify-email");[m
[32m+[m[32m      } else {[m
[32m+[m[32m        await setDoc(doc(db, "waitlist_users", user.uid), {[m
[32m+[m[32m          name: formData.name,[m
[32m+[m[32m          email: formData.email,[m
[32m+[m[32m          postcode: formData.postcode,[m
[32m+[m[32m          timestamp: serverTimestamp(),[m
[32m+[m[32m          source: "signupForm",[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        setShowWaitlistModal(true);[m
[32m+[m[32m        setStatus("");[m
[32m+[m[32m      }[m
[32m+[m[32m    } catch (error: any) {[m
[32m+[m[32m      if (error?.code === "auth/email-already-in-use") {[m
[32m+[m[32m        setShowEmailExistsModal(true);[m
[32m+[m[32m      } else if (error?.code === "auth/weak-password") {[m
[32m+[m[32m        setStatus("⚠️ Password must be at least 6 characters.");[m
[32m+[m[32m      } else {[m
[32m+[m[32m        console.error("Signup error:", error);[m
[32m+[m[32m        setStatus("❌ Something went wrong. Please try again.");[m
[32m+[m[32m      }[m
     }[m
[31m-  }[m
[31m-}; // ← closes handleSubmit[m
[32m+[m[32m  }; // handleSubmit[m
 [m
   return ([m
     <>[m
[36m@@ -224,318 +266,348 @@[m [mif (croppedImage) {[m
         <SignupErrorModal onClose={() => setShowEmailExistsModal(false)} />[m
       )}[m
 [m
[31m-  <div className="relative min-h-screen">[m
[31m-  {/* Background image */}[m
[31m-  <Image[m
[31m-    src="/images/login-tennis-court.jpg"[m
[31m-    alt=""[m
[31m-    fill[m
[31m-    priority[m
[31m-    className="object-cover"[m
[31m-  />[m
[31m-  {/* Overlay */}[m
[31m-  <div className="absolute inset-0 bg-black/40" />[m
[31m-[m
[31m-  {/* Content wrapper */}[m
[31m-<div className="relative z-10 min-h-screen flex flex-col items-center justify-center px-4">[m
[31m-  <div className="relative w-full max-w-xl bg-white/95 backdrop-blur-md p-8 rounded-2xl shadow-xl ring-1 ring-black/5">[m
[31m-[m
[31m-[m
[31m-        <Link[m
[31m-          href="/login"[m
[31m-          className="absolute top-4 left-4 text-sm bg-green-600 hover:bg-green-700 text-white py-1 px-3 rounded"[m
[31m-        >[m
[31m-          Login[m
[31m-        </Link>[m
[31m-[m
[31m-        <div className="flex justify-center mb-6">[m
[31m-          <Image[m
[31m-            src="/logo.png"[m
[31m-            alt="TennisMate Logo"[m
[31m-            width={100}[m
[31m-            height={100}[m
[31m-            className="rounded-full"[m
[31m-          />[m
[31m-        </div>[m
[32m+[m[32m      <div className="relative min-h-screen">[m
[32m+[m[32m        <Image src="/images/login-tennis-court.jpg" alt="" fill priority className="object-cover" />[m
[32m+[m[32m        <div className="absolute inset-0 bg-black/40" />[m
 [m
[31m-        <h1 className="text-2xl font-bold mb-6 text-center">[m
[31m-          Join TennisMate and Get on Court[m
[31m-        </h1>[m
[31m-[m
[31m-        <form onSubmit={handleSubmit} className="space-y-4 mt-2">[m
[31m-<label className="block text-sm font-medium mb-1">[m
[31m-  Name <span className="text-red-600">*</span>[m
[31m-</label>[m
[31m-<div className="relative mb-1">[m
[31m-  <User className="absolute left-3 top-2.5 h-5 w-5 text-gray-400" />[m
[31m-  <input[m
[31m-    type="text"[m
[31m-    name="name"[m
[31m-    value={formData.name}[m
[31m-    onChange={handleChange}[m
[31m-    placeholder="Your name"[m
[31m-    required[m
[31m-      autoComplete="name"[m
[31m-  autoCapitalize="words"[m
[31m-    className="w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"[m
[31m-  />[m
[31m-</div>[m
[31m-{errors.name && <p className="text-sm text-red-600 mb-2">{errors.name}</p>}[m
[31m-[m
[31m-<label className="block text-sm font-medium mb-1">[m
[31m-  Email address <span className="text-red-600">*</span>[m
[31m-</label>[m
[31m-<div className="relative mb-1">[m
[31m-  <Mail className="absolute left-3 top-2.5 h-5 w-5 text-gray-400" />[m
[31m-  <input[m
[31m-    type="email"[m
[31m-    name="email"[m
[31m-    value={formData.email}[m
[31m-    onChange={handleChange}[m
[31m-    placeholder="you@example.com"[m
[31m-    required[m
[31m-    autoComplete="email"[m
[31m-    autoCapitalize="none"[m
[31m-  autoCorrect="off"[m
[31m-    inputMode="email"[m
[31m-    className="w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"[m
[31m-  />[m
[31m-</div>[m
[31m-{errors.email && <p className="text-sm text-red-600 mb-2">{errors.email}</p>}[m
[31m-[m
[31m-<label className="block text-sm font-medium mb-1">[m
[31m-  Password <span className="text-red-600">*</span>[m
[31m-</label>[m
[31m-<div className="relative mb-1">[m
[31m-  <Lock className="absolute left-3 top-2.5 h-5 w-5 text-gray-400" />[m
[31m-<input[m
[31m-  type="password"[m
[31m-  name="password"[m
[31m-  value={formData.password}[m
[31m-  onChange={handleChange}[m
[31m-  placeholder="Password"[m
[31m-  required[m
[31m-  autoComplete="new-password"[m
[31m-  className="w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"[m
[31m-  onFocus={() => setIsPasswordFocused(true)}[m
[31m-  onBlur={() => setIsPasswordFocused(false)}[m
[31m-/>[m
[31m-</div>[m
[31m-{errors.password && <p className="text-sm text-red-600 mb-2">{errors.password}</p>}[m
[31m-[m
[31m-          {isPasswordFocused && ([m
[31m-            <div className="bg-gray-50 border border-gray-300 rounded px-3 py-2 mt-1 text-sm text-gray-800 shadow min-w-[220px]">[m
[31m-              <strong>Password requirements:</strong>[m
[31m-              <ul className="list-none mt-1 space-y-1">[m
[31m-                <li className="flex items-center gap-2">[m
[31m-                  {passwordCriteria.length ? ([m
[31m-                    <span className="text-green-600 font-bold">✔</span>[m
[31m-                  ) : ([m
[31m-                    <span className="text-red-500 font-bold">✘</span>[m
[31m-                  )}[m
[31m-                  At least 6 characters[m
[31m-                </li>[m
[31m-                <li className="flex items-center gap-2">[m
[31m-                  {passwordCriteria.uppercase ? ([m
[31m-                    <span className="text-green-600 font-bold">✔</span>[m
[31m-                  ) : ([m
[31m-                    <span className="text-red-500 font-bold">✘</span>[m
[31m-                  )}[m
[31m-                  1 uppercase letter[m
[31m-                </li>[m
[31m-                <li className="flex items-center gap-2">[m
[31m-                  {passwordCriteria.special ? ([m
[31m-                    <span className="text-green-600 font-bold">✔</span>[m
[31m-                  ) : ([m
[31m-                    <span className="text-red-500 font-bold">✘</span>[m
[31m-                  )}[m
[31m-                  1 special character (e.g. !@#$%)[m
[31m-                </li>[m
[31m-              </ul>[m
[32m+[m[32m        <div className="relative z-10 min-h-screen flex flex-col items-center justify-center px-4">[m
[32m+[m[32m          <div className="relative w-full max-w-xl bg-white/95 backdrop-blur-md p-8 rounded-2xl shadow-xl ring-1 ring-black/5">[m
[32m+[m[32m            <Link[m
[32m+[m[32m              href="/login"[m
[32m+[m[32m              className="absolute top-4 left-4 text-sm bg-green-600 hover:bg-green-700 text-white py-1 px-3 rounded"[m
[32m+[m[32m            >[m
[32m+[m[32m              Login[m
[32m+[m[32m            </Link>[m
[32m+[m
[32m+[m[32m            <div className="flex justify-center mb-6">[m
[32m+[m[32m              <Image src="/logo.png" alt="TennisMate Logo" width={100} height={100} className="rounded-full" />[m
             </div>[m
[31m-          )}[m
 [m
[31m-<label className="block text-sm font-medium mb-1">[m
[31m-  Postcode <span className="text-red-600">*</span>[m
[31m-</label>[m
[31m-<div className="relative mb-1">[m
[31m-  <MapPin className="absolute left-3 top-2.5 h-5 w-5 text-gray-400" />[m
[31m-<input[m
[31m-  type="text"[m
[31m-  name="postcode"[m
[31m-  value={formData.postcode}[m
[31m-  onChange={handleChange}[m
[31m-  placeholder="e.g. 3000"[m
[31m-  required[m
[31m-  inputMode="numeric"[m
[31m-  pattern="[0-9]{4}"[m
[31m-  maxLength={4}[m
[31m-  autoComplete="postal-code"[m
[31m-  title="Enter a 4-digit postcode, e.g. 3058"[m
[31m-  className="w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"[m
[31m-/>[m
[31m-[m
[31m-</div>[m
[31m-{errors.postcode && <p className="text-sm text-red-600 mb-2">{errors.postcode}</p>}[m
[31m-[m
[31m-[m
[31m-<label className="block text-sm font-medium mb-1">[m
[31m-  Skill level <span className="text-red-600">*</span>[m
[31m-</label>[m
[31m-<select[m
[31m-  name="skillLevel"[m
[31m-  value={formData.skillLevel}[m
[31m-  onChange={handleChange}[m
[31m-  required[m
[31m-  className="w-full pl-3 pr-8 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"[m
[31m->[m
[31m-  <option value="">Select skill level</option>[m
[31m-  <option value="Beginner">Beginner</option>[m
[31m-  <option value="Intermediate">Intermediate</option>[m
[31m-  <option value="Advanced">Advanced</option>[m
[31m-</select>[m
[31m-{errors.skillLevel && <p className="text-sm text-red-600 mt-1">{errors.skillLevel}</p>}[m
[31m-[m
[31m-[m
[31m-<fieldset className="mt-2">[m
[31m-  <legend className="block text-sm font-medium mb-2">[m
[31m-    Availability <span className="text-red-600">*</span>[m
[31m-  </legend>[m
[31m-[m
[31m-  {["Weekdays AM", "Weekdays PM", "Weekends AM", "Weekends PM"].map((slot) => {[m
[31m-    const checked = formData.availability.includes(slot);[m
[31m-    return ([m
[31m-      <label key={slot} className="flex items-center gap-2 mb-2">[m
[31m-        <input[m
[31m-          type="checkbox"[m
[31m-          value={slot}[m
[31m-          checked={checked}[m
[31m-          onChange={handleCheckbox}[m
[31m-          className="h-4 w-4 accent-green-600"[m
[31m-        />[m
[31m-        <span>{slot}</span>[m
[31m-      </label>[m
[31m-    );[m
[31m-  })}[m
[31m-  {errors.availability && <p className="text-sm text-red-600 mt-1">{errors.availability}</p>}[m
[31m-</fieldset>[m
[31m-[m
[31m-[m
[31m-          <textarea[m
[31m-            name="bio"[m
[31m-            value={formData.bio}[m
[31m-            onChange={handleChange}[m
[31m-            placeholder="Short bio"[m
[31m-            rows={4}[m
[31m-            className="w-full p-2 border rounded"[m
[31m-          />[m
[31m-[m
[31m-          <div className="flex flex-col items-start gap-2">[m
[31m-            <label className="text-sm font-medium">Profile Picture:</label>[m
[31m-            <img[m
[31m-  src={previewURL}[m
[31m-  alt="Profile preview"[m
[31m-  className="w-20 h-20 object-cover rounded-full border bg-gray-100"[m
[31m-/>[m
[31m-[m
[31m-            <label[m
[31m-              htmlFor="upload"[m
[31m-              className="cursor-pointer inline-block bg-green-600 hover:bg-green-700 text-white text-sm px-4 py-2 rounded"[m
[31m-            >[m
[31m-              Choose Profile Picture[m
[31m-            </label>[m
[31m-            <input[m
[31m-              id="upload"[m
[31m-              type="file"[m
[31m-              accept="image/*"[m
[31m-              onChange={handleImageChange}[m
[31m-              className="hidden"[m
[31m-            />[m
[31m-          </div>[m
[32m+[m[32m            <h1 className="text-2xl font-bold mb-6 text-center">Join TennisMate and Get on Court</h1>[m
[32m+[m
[32m+[m[32m            <form onSubmit={handleSubmit} className="space-y-4 mt-2">[m
[32m+[m[32m              {/* Name */}[m
[32m+[m[32m              <label className="block text-sm font-medium mb-1">[m
[32m+[m[32m                Name <span className="text-red-600">*</span>[m
[32m+[m[32m              </label>[m
[32m+[m[32m              <div className="relative mb-1">[m
[32m+[m[32m                <User className="absolute left-3 top-2.5 h-5 w-5 text-gray-400" />[m
[32m+[m[32m                <input[m
[32m+[m[32m                  type="text"[m
[32m+[m[32m                  name="name"[m
[32m+[m[32m                  value={formData.name}[m
[32m+[m[32m                  onChange={handleChange}[m
[32m+[m[32m                  placeholder="Your name"[m
[32m+[m[32m                  required[m
[32m+[m[32m                  autoComplete="name"[m
[32m+[m[32m                  autoCapitalize="words"[m
[32m+[m[32m                  className="w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"[m
[32m+[m[32m                />[m
[32m+[m[32m              </div>[m
[32m+[m[32m              {errors.name && <p className="text-sm text-red-600 mb-2">{errors.name}</p>}[m
[32m+[m
[32m+[m[32m              {/* Email */}[m
[32m+[m[32m              <label className="block text-sm font-medium mb-1">[m
[32m+[m[32m                Email address <span className="text-red-600">*</span>[m
[32m+[m[32m              </label>[m
[32m+[m[32m              <div className="relative mb-1">[m
[32m+[m[32m                <Mail className="absolute left-3 top-2.5 h-5 w-5 text-gray-400" />[m
[32m+[m[32m                <input[m
[32m+[m[32m                  type="email"[m
[32m+[m[32m                  name="email"[m
[32m+[m[32m                  value={formData.email}[m
[32m+[m[32m                  onChange={handleChange}[m
[32m+[m[32m                  placeholder="you@example.com"[m
[32m+[m[32m                  required[m
[32m+[m[32m                  autoComplete="email"[m
[32m+[m[32m                  autoCapitalize="none"[m
[32m+[m[32m                  autoCorrect="off"[m
[32m+[m[32m                  inputMode="email"[m
[32m+[m[32m                  className="w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"[m
[32m+[m[32m                />[m
[32m+[m[32m              </div>[m
[32m+[m[32m              {errors.email && <p className="text-sm text-red-600 mb-2">{errors.email}</p>}[m
[32m+[m
[32m+[m[32m              {/* Password */}[m
[32m+[m[32m              <label className="block text-sm font-medium mb-1">[m
[32m+[m[32m                Password <span className="text-red-600">*</span>[m
[32m+[m[32m              </label>[m
[32m+[m[32m              <div className="relative mb-1">[m
[32m+[m[32m                <Lock className="absolute left-3 top-2.5 h-5 w-5 text-gray-400" />[m
[32m+[m[32m                <input[m
[32m+[m[32m                  type="password"[m
[32m+[m[32m                  name="password"[m
[32m+[m[32m                  value={formData.password}[m
[32m+[m[32m                  onChange={handleChange}[m
[32m+[m[32m                  placeholder="Password"[m
[32m+[m[32m                  required[m
[32m+[m[32m                  autoComplete="new-password"[m
[32m+[m[32m                  className="w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"[m
[32m+[m[32m                  onFocus={() => setIsPasswordFocused(true)}[m
[32m+[m[32m                  onBlur={() => setIsPasswordFocused(false)}[m
[32m+[m[32m                />[m
[32m+[m[32m              </div>[m
[32m+[m[32m              {errors.password && <p className="text-sm text-red-600 mb-2">{errors.password}</p>}[m
[32m+[m
[32m+[m[32m              {isPasswordFocused && ([m
[32m+[m[32m                <div className="bg-gray-50 border border-gray-300 rounded px-3 py-2 mt-1 text-sm text-gray-800 shadow min-w-[220px]">[m
[32m+[m[32m                  <strong>Password requirements:</strong>[m
[32m+[m[32m                  <ul className="list-none mt-1 space-y-1">[m
[32m+[m[32m                    <li className="flex items-center gap-2">[m
[32m+[m[32m                      <span className={passwordCriteria.length ? "text-green-600 font-bold" : "text-red-500 font-bold"}>[m
[32m+[m[32m                        {passwordCriteria.length ? "✔" : "✘"}[m
[32m+[m[32m                      </span>[m
[32m+[m[32m                      At least 6 characters[m
[32m+[m[32m                    </li>[m
[32m+[m[32m                    <li className="flex items-center gap-2">[m
[32m+[m[32m                      <span className={passwordCriteria.uppercase ? "text-green-600 font-bold" : "text-red-500 font-bold"}>[m
[32m+[m[32m                        {passwordCriteria.uppercase ? "✔" : "✘"}[m
[32m+[m[32m                      </span>[m
[32m+[m[32m                      1 uppercase letter[m
[32m+[m[32m                    </li>[m
[32m+[m[32m                    <li className="flex items-center gap-2">[m
[32m+[m[32m                      <span className={passwordCriteria.special ? "text-green-600 font-bold" : "text-red-500 font-bold"}>[m
[32m+[m[32m                        {passwordCriteria.special ? "✔" : "✘"}[m
[32m+[m[32m                      </span>[m
[32m+[m[32m                      1 special character (e.g. !@#$%)[m
[32m+[m[32m                    </li>[m
[32m+[m[32m                  </ul>[m
[32m+[m[32m                </div>[m
[32m+[m[32m              )}[m
[32m+[m
[32m+[m[32m              {/* Postcode */}[m
[32m+[m[32m              <label className="block text-sm font-medium mb-1">[m
[32m+[m[32m                Postcode <span className="text-red-600">*</span>[m
[32m+[m[32m              </label>[m
[32m+[m[32m              <div className="relative mb-1">[m
[32m+[m[32m                <MapPin className="absolute left-3 top-2.5 h-5 w-5 text-gray-400" />[m
[32m+[m[32m                <input[m
[32m+[m[32m                  type="text"[m
[32m+[m[32m                  name="postcode"[m
[32m+[m[32m                  value={formData.postcode}[m
[32m+[m[32m                  onChange={handleChange}[m
[32m+[m[32m                  placeholder="e.g. 3000"[m
[32m+[m[32m                  required[m
[32m+[m[32m                  inputMode="numeric"[m
[32m+[m[32m                  pattern="[0-9]{4}"[m
[32m+[m[32m                  maxLength={4}[m
[32m+[m[32m                  autoComplete="postal-code"[m
[32m+[m[32m                  title="Enter a 4-digit postcode, e.g. 3058"[m
[32m+[m[32m                  className="w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"[m
[32m+[m[32m                />[m
[32m+[m[32m              </div>[m
[32m+[m[32m              {errors.postcode && <p className="text-sm text-red-600 mb-2">{errors.postcode}</p>}[m
[32m+[m
[32m+[m[32m              {/* TMR (optional) */}[m
[32m+[m[32m              <div className="grid gap-2">[m
[32m+[m[32m                <label className="block text-sm font-medium mb-1">[m
[32m+[m[32m                  {RATING_LABEL} (optional)[m
[32m+[m[32m                </label>[m
[32m+[m[32m                <input[m
[32m+[m[32m                  type="number"[m
[32m+[m[32m                  name="rating"[m
[32m+[m[32m                  step="0.01"[m
[32m+[m[32m                  min={1}[m
[32m+[m[32m                  max={16.5}[m
[32m+[m[32m                  inputMode="decimal"[m
[32m+[m[32m                  placeholder="e.g., 6.20"[m
[32m+[m[32m                  value={formData.rating}[m
[32m+[m[32m                  onChange={handleChange}[m
[32m+[m[32m                  className="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"[m
[32m+[m[32m                />[m
[32m+[m[32m                {errors.rating && <p className="text-sm text-red-600 mt-1">{errors.rating}</p>}[m
[32m+[m[32m                {typeof formData.rating === "number" && ([m
[32m+[m[32m                  <p className="text-xs text-gray-600">[m
[32m+[m[32m                    Suggested level:{" "}[m
[32m+[m[32m                    <strong>[m
[32m+[m[32m                      {SKILL_OPTIONS.find((s) => s.value === (skillFromUTR(formData.rating as number) ?? ""))?.label}[m
[32m+[m[32m                    </strong>[m
[32m+[m[32m                    .[m
[32m+[m[32m                  </p>[m
[32m+[m[32m                )}[m
[32m+[m[32m                <p className="text-xs text-gray-500">[m
[32m+[m[32m                  1.00–16.50. Comparable to UTR® (TennisMate is not affiliated with Universal Tennis).[m
[32m+[m[32m                </p>[m
[32m+[m[32m              </div>[m
[32m+[m
[32m+[m[32m              {/* Skill level */}[m
[32m+[m[32m              <label className="block text-sm font-medium mb-1">[m
[32m+[m[32m                Skill level <span className="text-red-600">*</span>[m
[32m+[m[32m              </label>[m
[32m+[m[32m              <select[m
[32m+[m[32m                name="skillBand"[m
[32m+[m[32m                value={formData.skillBand}[m
[32m+[m[32m                onChange={handleChange}[m
[32m+[m[32m                required[m
[32m+[m[32m                className="w-full pl-3 pr-8 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 bg-white"[m
[32m+[m[32m              >[m
[32m+[m[32m                <option value="" disabled>[m
[32m+[m[32m                  Select your level…[m
[32m+[m[32m                </option>[m
[32m+[m[32m                {SKILL_OPTIONS.map((o) => ([m
[32m+[m[32m                  <option key={o.value} value={o.value}>[m
[32m+[m[32m                    {o.label}[m
[32m+[m[32m                  </option>[m
[32m+[m[32m                ))}[m
[32m+[m[32m              </select>[m
[32m+[m[32m              {errors.skillBand && <p className="text-sm text-red-600 mt-1">{errors.skillBand}</p>}[m
[32m+[m
[32m+[m[32m              {/* Availability */}[m
[32m+[m[32m              <fieldset className="mt-2">[m
[32m+[m[32m                <legend className="block text-sm font-medium mb-2">[m
[32m+[m[32m                  Availability <span className="text-red-600">*</span>[m
[32m+[m[32m                </legend>[m
[32m+[m[32m                {["Weekdays AM", "Weekdays PM", "Weekends AM", "Weekends PM"].map((slot) => {[m
[32m+[m[32m                  const checked = formData.availability.includes(slot);[m
[32m+[m[32m                  return ([m
[32m+[m[32m                    <label key={slot} className="flex items-center gap-2 mb-2">[m
[32m+[m[32m                      <input[m
[32m+[m[32m                        type="checkbox"[m
[32m+[m[32m                        value={slot}[m
[32m+[m[32m                        checked={checked}[m
[32m+[m[32m                        onChange={handleCheckbox}[m
[32m+[m[32m                        className="h-4 w-4 accent-green-600"[m
[32m+[m[32m                      />[m
[32m+[m[32m                      <span>{slot}</span>[m
[32m+[m[32m                    </label>[m
[32m+[m[32m                  );[m
[32m+[m[32m                })}[m
[32m+[m[32m                {errors.availability && <p className="text-sm text-red-600 mt-1">{errors.availability}</p>}[m
[32m+[m[32m              </fieldset>[m
[32m+[m
[32m+[m[32m              {/* Bio */}[m
[32m+[m[32m              <textarea[m
[32m+[m[32m                name="bio"[m
[32m+[m[32m                value={formData.bio}[m
[32m+[m[32m                onChange={handleChange}[m
[32m+[m[32m                placeholder="Short bio"[m
[32m+[m[32m                rows={4}[m
[32m+[m[32m                className="w-full p-2 border rounded"[m
[32m+[m[32m              />[m
[32m+[m
[32m+[m[32m              {/* Profile picture (REQUIRED) */}[m
[32m+[m[32m              <div className="flex flex-col items-start gap-2">[m
[32m+[m[32m                <label className="text-sm font-medium">[m
[32m+[m[32m                  Profile Picture <span className="text-red-600">*</span>[m
[32m+[m[32m                </label>[m
[32m+[m
[32m+[m[32m                <div className={`w-20 h-20 rounded-full border bg-gray-100 overflow-hidden ${!hasPhoto ? "ring-2 ring-red-300" : ""}`}>[m
[32m+[m[32m                  <img src={previewURL} alt="Profile preview" className="w-20 h-20 object-cover" />[m
[32m+[m[32m                </div>[m
 [m
[31m-          {/* Cropper Overlay */}[m
[31m-          {showCropper && imageSrc && ([m
[31m-            <div className="fixed inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center z-50">[m
[31m-              <div className="bg-white rounded-xl shadow-lg p-4 flex flex-col items-center justify-center w-[340px]">[m
[31m-                <div className="relative w-[300px] h-[300px]">[m
[31m-                  <Cropper[m
[31m-                    image={imageSrc}[m
[31m-                    crop={crop}[m
[31m-                    zoom={zoom}[m
[31m-                    aspect={1}[m
[31m-                    cropShape="round"[m
[31m-                    showGrid={true}[m
[31m-                    onCropChange={setCrop}[m
[31m-                    onZoomChange={setZoom}[m
[31m-                    onCropComplete={handleCropComplete}[m
[32m+[m[32m                {!hasPhoto && ([m
[32m+[m[32m                  <p className="text-xs text-red-600">[m
[32m+[m[32m                    Please upload a clear photo of yourself (required).[m
[32m+[m[32m                  </p>[m
[32m+[m[32m                )}[m
[32m+[m
[32m+[m[32m                <div className="flex items-center gap-2">[m
[32m+[m[32m                  <label[m
[32m+[m[32m                    htmlFor="upload"[m
[32m+[m[32m                    className="cursor-pointer inline-flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white text-sm px-3 py-2 rounded"[m
[32m+[m[32m                  >[m
[32m+[m[32m                    <Camera className="h-4 w-4" />[m
[32m+[m[32m                    Choose Photo[m
[32m+[m[32m                  </label>[m
[32m+[m[32m                  <input[m
[32m+[m[32m                    id="upload"[m
[32m+[m[32m                    type="file"[m
[32m+[m[32m                    accept="image/*"[m
[32m+[m[32m                    onChange={handleImageChange}[m
[32m+[m[32m                    className="hidden"[m
[32m+[m[32m                    // On mobile, this hints to open camera (supported browsers):[m
[32m+[m[32m                    capture="user"[m
                   />[m
                 </div>[m
[32m+[m
[32m+[m[32m                {errors.photo && <p className="text-sm text-red-600">{errors.photo}</p>}[m
[32m+[m[32m              </div>[m
[32m+[m
[32m+[m[32m              {/* Cropper Overlay */}[m
[32m+[m[32m              {showCropper && imageSrc && ([m
[32m+[m[32m                <div className="fixed inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center z-50">[m
[32m+[m[32m                  <div className="bg-white rounded-xl shadow-lg p-4 flex flex-col items-center justify-center w-[340px]">[m
[32m+[m[32m                    <div className="relative w-[300px] h-[300px]">[m
[32m+[m[32m                      <Cropper[m
[32m+[m[32m                        image={imageSrc}[m
[32m+[m[32m                        crop={crop}[m
[32m+[m[32m                        zoom={zoom}[m
[32m+[m[32m                        aspect={1}[m
[32m+[m[32m                        cropShape="round"[m
[32m+[m[32m                        showGrid={true}[m
[32m+[m[32m                        onCropChange={setCrop}[m
[32m+[m[32m                        onZoomChange={setZoom}[m
[32m+[m[32m                        onCropComplete={handleCropComplete}[m
[32m+[m[32m                      />[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                    <button[m
[32m+[m[32m                      onClick={showCroppedImage}[m
[32m+[m[32m                      type="button"[m
[32m+[m[32m                      className="mt-4 bg-green-600 text-white px-4 py-2 rounded font-semibold"[m
[32m+[m[32m                    >[m
[32m+[m[32m                      Confirm Crop[m
[32m+[m[32m                    </button>[m
[32m+[m[32m                    <button[m
[32m+[m[32m                      onClick={() => setShowCropper(false)}[m
[32m+[m[32m                      type="button"[m
[32m+[m[32m                      className="mt-2 text-xs text-gray-600 underline"[m
[32m+[m[32m                    >[m
[32m+[m[32m                      Cancel[m
[32m+[m[32m                    </button>[m
[32m+[m[32m                  </div>[m
[32m+[m[32m                </div>[m
[32m+[m[32m              )}[m
[32m+[m
[32m+[m[32m              <button[m
[32m+[m[32m                type="submit"[m
[32m+[m[32m                className={`w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg transition ${[m
[32m+[m[32m                  !canSubmit ? "opacity-60 cursor-not-allowed" : ""[m
[32m+[m[32m                }`}[m
[32m+[m[32m                disabled={!canSubmit}[m
[32m+[m[32m              >[m
[32m+[m[32m                Create Account[m
[32m+[m[32m              </button>[m
[32m+[m
[32m+[m[32m              {status && ([m
[32m+[m[32m                <div role="status" aria-live="polite" className="mt-2 text-sm text-gray-800">[m
[32m+[m[32m                  {status}[m
[32m+[m[32m                </div>[m
[32m+[m[32m              )}[m
[32m+[m
[32m+[m[32m              <div className="text-xs text-gray-600 text-center mt-4">[m
[32m+[m[32m                By signing up, you agree to our{" "}[m
[32m+[m[32m                <a href="/terms" className="text-blue-600 underline">[m
[32m+[m[32m                  Terms[m
[32m+[m[32m                </a>{" "}[m
[32m+[m[32m                and{" "}[m
[32m+[m[32m                <a href="/privacy" className="text-blue-600 underline">[m
[32m+[m[32m                  Privacy Policy[m
[32m+[m[32m                </a>[m
[32m+[m[32m                .[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </form>[m
[32m+[m[32m          </div>[m
[32m+[m
[32m+[m[32m          {showWaitlistModal && ([m
[32m+[m[32m            <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50">[m
[32m+[m[32m              <div className="bg-white rounded-xl shadow-lg p-6 max-w-md text-center space-y-4">[m
[32m+[m[32m                <h2 className="text-xl font-semibold">Thanks for signing up!</h2>[m
[32m+[m[32m                <p className="text-gray-700 text-sm">[m
[32m+[m[32m                  📍 TennisMate is currently only available in Victoria.<br />[m
[32m+[m[32m                  We’ve saved your interest and will notify you when we launch[m
[32m+[m[32m                  in your area.[m
[32m+[m[32m                </p>[m
                 <button[m
[31m-                  onClick={showCroppedImage}[m
[31m-                  type="button"[m
[31m-                  className="mt-4 bg-green-600 text-white px-4 py-2 rounded font-semibold"[m
[31m-                >[m
[31m-                  Confirm Crop[m
[31m-                </button>[m
[31m-                <button[m
[31m-                  onClick={() => setShowCropper(false)}[m
[31m-                  type="button"[m
[31m-                  className="mt-2 text-xs text-gray-600 underline"[m
[32m+[m[32m                  onClick={() => setShowWaitlistModal(false)}[m
[32m+[m[32m                  className="mt-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded"[m
                 >[m
[31m-                  Cancel[m
[32m+[m[32m                  Got it[m
                 </button>[m
               </div>[m
             </div>[m
           )}[m
[31m-[m
[31m-<button[m
[31m-  type="submit"[m
[31m-  className={`w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg transition ${!canSubmit ? "opacity-60 cursor-not-allowed" : ""}`}[m
[31m-  disabled={!canSubmit}[m
[31m->[m
[31m-  Create Account[m
[31m-</button>[m
[31m-[m
[31m-          {status && ([m
[31m-  <div role="status" aria-live="polite" className="mt-2 text-sm text-gray-800">[m
[31m-    {status}[m
[31m-  </div>[m
[31m-)}[m
[31m-[m
[31m-  <div className="text-xs text-gray-600 text-center mt-4">[m
[31m-  By signing up, you agree to our{" "}[m
[31m-  <a href="/terms" className="text-blue-600 underline">Terms</a>{" "}[m
[31m-  and{" "}[m
[31m-  <a href="/privacy" className="text-blue-600 underline">Privacy Policy</a>.[m
[31m-</div>[m
[31m-[m
[31m-        </form>[m
[32m+[m[32m        </div>[m
       </div>[m
[31m-[m
[31m-[m
[31m-{showWaitlistModal && ([m
[31m-  <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50">[m
[31m-    <div className="bg-white rounded-xl shadow-lg p-6 max-w-md text-center space-y-4">[m
[31m-      <h2 className="text-xl font-semibold">Thanks for signing up!</h2>[m
[31m-      <p className="text-gray-700 text-sm">[m
[31m-        📍 TennisMate is currently only available in Victoria.<br />[m
[31m-        We’ve saved your interest and will notify you when we launch in your area.[m
[31m-      </p>[m
[31m-      <button[m
[31m-        onClick={() => setShowWaitlistModal(false)}[m
[31m-        className="mt-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded"[m
[31m-      >[m
[31m-        Got it[m
[31m-      </button>[m
[31m-    </div>[m
[31m-  </div>[m
[31m-)}[m
[31m-[m
[31m-    </div>  {/* closes content wrapper */}[m
[31m-  </div>    {/* closes background wrapper */}[m
[31m-</>[m
[31m-);[m
[32m+[m[32m    </>[m
[32m+[m[32m  );[m
 }[m
[31m-[m
[31m-[m
[31m-[m
[1mdiff --git a/app/verify-email/page.tsx b/app/verify-email/page.tsx[m
[1mindex 0f343f2..7ce0c6d 100644[m
[1m--- a/app/verify-email/page.tsx[m
[1m+++ b/app/verify-email/page.tsx[m
[36m@@ -17,7 +17,7 @@[m [mexport default function VerifyEmailPage() {[m
   const [sending, setSending] = useState(false);[m
   const [cooldown, setCooldown] = useState(0);[m
 [m
[31m-  const CONTINUE_TO = "/directory";[m
[32m+[m[32m  const CONTINUE_TO = "/home";[m
 [m
   const buildLoginRedirect = (email?: string) => {[m
     const params = new URLSearchParams({[m
[1mdiff --git a/firestore.indexes.json b/firestore.indexes.json[m
[1mindex 2e3f623..6521e63 100644[m
[1m--- a/firestore.indexes.json[m
[1m+++ b/firestore.indexes.json[m
[36m@@ -80,6 +80,22 @@[m
         { "fieldPath": "status", "order": "ASCENDING" },[m
         { "fieldPath": "start", "order": "ASCENDING" }[m
       ][m
[32m+[m[32m    },[m
[32m+[m[32m    {[m
[32m+[m[32m      "collectionGroup": "email_jobs",[m
[32m+[m[32m      "queryScope": "COLLECTION",[m
[32m+[m[32m      "fields": [[m
[32m+[m[32m        { "fieldPath": "status", "order": "ASCENDING" },[m
[32m+[m[32m        { "fieldPath": "runAt", "order": "ASCENDING" }[m
[32m+[m[32m      ][m
[32m+[m[32m    },[m
[32m+[m[32m    {[m
[32m+[m[32m      "collectionGroup": "players",[m
[32m+[m[32m      "queryScope": "COLLECTION",[m
[32m+[m[32m      "fields": [[m
[32m+[m[32m        { "fieldPath": "skillBand", "order": "ASCENDING" },[m
[32m+[m[32m        { "fieldPath": "utr", "order": "ASCENDING" }[m
[32m+[m[32m      ][m
     }[m
   ],[m
   "fieldOverrides": [][m
[1mdiff --git a/public/images/match.jpg b/public/images/match.jpg[m
[1mnew file mode 100644[m
[1mindex 0000000..ec382ea[m
Binary files /dev/null and b/public/images/match.jpg differ
[1mdiff --git a/public/images/matches.jpg b/public/images/matches.jpg[m
[1mnew file mode 100644[m
[1mindex 0000000..550b445[m
Binary files /dev/null and b/public/images/matches.jpg differ
